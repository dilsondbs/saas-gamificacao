<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Teste de Responsividade - SaaS Gamifica√ß√£o</title>
    <style>
        * {
            box-sizing: border-box;
        }
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            margin: 0;
            padding: 20px;
            background: #f8fafc;
        }
        .container {
            max-width: 1200px;
            margin: 0 auto;
        }
        .test-panel {
            background: white;
            padding: 20px;
            margin: 20px 0;
            border-radius: 8px;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
        }
        .device-simulator {
            border: 2px solid #e2e8f0;
            border-radius: 12px;
            margin: 20px 0;
            overflow: hidden;
            position: relative;
        }
        .device-header {
            background: #4a5568;
            color: white;
            padding: 10px 15px;
            font-size: 14px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        .device-screen {
            background: white;
            transition: all 0.3s ease;
        }
        .iframe-container {
            position: relative;
            overflow: hidden;
        }
        .iframe-overlay {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0,0,0,0.02);
            pointer-events: none;
            z-index: 1;
        }
        iframe {
            border: none;
            width: 100%;
            transform-origin: 0 0;
        }
        .controls {
            display: flex;
            gap: 10px;
            margin: 20px 0;
            flex-wrap: wrap;
        }
        .device-btn {
            padding: 8px 16px;
            border: 1px solid #d1d5db;
            background: white;
            border-radius: 6px;
            cursor: pointer;
            font-size: 14px;
            transition: all 0.2s;
        }
        .device-btn:hover {
            background: #f3f4f6;
            border-color: #9ca3af;
        }
        .device-btn.active {
            background: #3b82f6;
            color: white;
            border-color: #3b82f6;
        }
        .metrics {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin: 20px 0;
        }
        .metric-card {
            background: #f8fafc;
            padding: 15px;
            border-radius: 6px;
            text-align: center;
            border: 1px solid #e2e8f0;
        }
        .metric-value {
            font-size: 24px;
            font-weight: bold;
            color: #1f2937;
        }
        .metric-label {
            font-size: 12px;
            color: #6b7280;
            margin-top: 5px;
        }
        .test-results {
            background: #f9fafb;
            border: 1px solid #e5e7eb;
            border-radius: 6px;
            padding: 15px;
            margin: 15px 0;
        }
        .result-item {
            padding: 8px 12px;
            margin: 5px 0;
            border-radius: 4px;
            font-family: monospace;
            font-size: 14px;
        }
        .result-success {
            background: #ecfdf5;
            color: #065f46;
            border: 1px solid #a7f3d0;
        }
        .result-warning {
            background: #fffbeb;
            color: #92400e;
            border: 1px solid #fde68a;
        }
        .result-error {
            background: #fef2f2;
            color: #991b1b;
            border: 1px solid #fecaca;
        }
        .orientation-controls {
            display: flex;
            gap: 10px;
            align-items: center;
        }
        
        @media (max-width: 768px) {
            body { padding: 10px; }
            .controls { flex-direction: column; }
            .device-simulator { margin: 10px 0; }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üì± Teste de Responsividade</h1>
        <p>Simulador de dispositivos para testar a aplica√ß√£o em diferentes resolu√ß√µes</p>

        <div class="test-panel">
            <h3>üéõÔ∏è Controles</h3>
            <div class="controls">
                <button class="device-btn active" onclick="setDevice('desktop', 1200, 800)">üñ•Ô∏è Desktop</button>
                <button class="device-btn" onclick="setDevice('laptop', 1024, 768)">üíª Laptop</button>
                <button class="device-btn" onclick="setDevice('tablet', 768, 1024)">üì± Tablet</button>
                <button class="device-btn" onclick="setDevice('mobile', 375, 667)">üì± Mobile</button>
                <button class="device-btn" onclick="setDevice('mobile-large', 414, 896)">üì± Mobile Large</button>
            </div>
            
            <div class="orientation-controls">
                <label>Orienta√ß√£o:</label>
                <button class="device-btn" onclick="rotateDevice()">üîÑ Rotacionar</button>
                <button class="device-btn" onclick="runResponsiveTests()">üß™ Executar Testes</button>
            </div>
        </div>

        <div class="metrics">
            <div class="metric-card">
                <div class="metric-value" id="current-width">1200</div>
                <div class="metric-label">Largura (px)</div>
            </div>
            <div class="metric-card">
                <div class="metric-value" id="current-height">800</div>
                <div class="metric-label">Altura (px)</div>
            </div>
            <div class="metric-card">
                <div class="metric-value" id="current-ratio">1.5</div>
                <div class="metric-label">Aspect Ratio</div>
            </div>
            <div class="metric-card">
                <div class="metric-value" id="current-breakpoint">Desktop</div>
                <div class="metric-label">Breakpoint</div>
            </div>
        </div>

        <div class="device-simulator" id="device-simulator">
            <div class="device-header">
                <span id="device-name">Desktop - 1200x800</span>
                <span id="device-info">Simula√ß√£o de dispositivo</span>
            </div>
            <div class="device-screen">
                <div class="iframe-container">
                    <div class="iframe-overlay"></div>
                    <iframe id="app-iframe" src="http://localhost:8000" width="1200" height="800"></iframe>
                </div>
            </div>
        </div>

        <div class="test-panel">
            <h3>üß™ Resultados dos Testes</h3>
            <div class="test-results" id="test-results">
                <div class="result-item result-success">‚úÖ Pronto para testar - Selecione um dispositivo e clique em "Executar Testes"</div>
            </div>
        </div>

        <div class="test-panel">
            <h3>üìä An√°lise Autom√°tica</h3>
            <div id="analysis-results">
                <button onclick="analyzeLayout()">üîç Analisar Layout Atual</button>
                <div id="layout-analysis"></div>
            </div>
        </div>
    </div>

    <script>
        let currentDevice = { name: 'desktop', width: 1200, height: 800 };
        
        const devices = {
            'desktop': { width: 1200, height: 800, name: 'Desktop' },
            'laptop': { width: 1024, height: 768, name: 'Laptop' },
            'tablet': { width: 768, height: 1024, name: 'Tablet' },
            'mobile': { width: 375, height: 667, name: 'iPhone SE' },
            'mobile-large': { width: 414, height: 896, name: 'iPhone 12 Pro' }
        };

        function setDevice(deviceKey, width, height) {
            currentDevice = { name: deviceKey, width, height };
            
            // Atualizar bot√µes
            document.querySelectorAll('.device-btn').forEach(btn => btn.classList.remove('active'));
            event.target.classList.add('active');
            
            // Atualizar simulador
            const iframe = document.getElementById('app-iframe');
            const simulator = document.getElementById('device-simulator');
            
            iframe.width = width;
            iframe.height = height;
            
            // Ajustar tamanho do simulador se necess√°rio
            if (width > 1000) {
                const scale = Math.min(1, (window.innerWidth - 100) / width);
                simulator.style.transform = `scale(${scale})`;
                simulator.style.transformOrigin = 'top left';
                simulator.style.width = width + 'px';
            } else {
                simulator.style.transform = 'none';
                simulator.style.width = '100%';
            }
            
            // Atualizar informa√ß√µes
            updateMetrics();
            updateDeviceInfo();
            
            addTestResult(`üì± Alterado para ${devices[deviceKey]?.name || deviceKey}: ${width}x${height}`, 'success');
        }

        function rotateDevice() {
            const newWidth = currentDevice.height;
            const newHeight = currentDevice.width;
            
            currentDevice.width = newWidth;
            currentDevice.height = newHeight;
            
            const iframe = document.getElementById('app-iframe');
            iframe.width = newWidth;
            iframe.height = newHeight;
            
            updateMetrics();
            updateDeviceInfo();
            
            addTestResult(`üîÑ Dispositivo rotacionado: ${newWidth}x${newHeight}`, 'success');
        }

        function updateMetrics() {
            document.getElementById('current-width').textContent = currentDevice.width;
            document.getElementById('current-height').textContent = currentDevice.height;
            
            const ratio = (currentDevice.width / currentDevice.height).toFixed(2);
            document.getElementById('current-ratio').textContent = ratio;
            
            const breakpoint = getBreakpoint(currentDevice.width);
            document.getElementById('current-breakpoint').textContent = breakpoint;
        }

        function updateDeviceInfo() {
            const deviceName = document.getElementById('device-name');
            const deviceInfo = document.getElementById('device-info');
            
            deviceName.textContent = `${devices[currentDevice.name]?.name || currentDevice.name} - ${currentDevice.width}x${currentDevice.height}`;
            deviceInfo.textContent = `${getBreakpoint(currentDevice.width)} ‚Ä¢ ${currentDevice.width > currentDevice.height ? 'Landscape' : 'Portrait'}`;
        }

        function getBreakpoint(width) {
            if (width < 480) return 'XS';
            if (width < 768) return 'SM';
            if (width < 1024) return 'MD';
            if (width < 1280) return 'LG';
            return 'XL';
        }

        function addTestResult(message, type = 'success') {
            const results = document.getElementById('test-results');
            const item = document.createElement('div');
            item.className = `result-item result-${type}`;
            item.innerHTML = `${new Date().toLocaleTimeString()} - ${message}`;
            results.appendChild(item);
            results.scrollTop = results.scrollHeight;
        }

        function runResponsiveTests() {
            addTestResult('üß™ Iniciando testes de responsividade...', 'success');
            
            // Testar diferentes aspectos
            setTimeout(() => testViewportSize(), 500);
            setTimeout(() => testScrollability(), 1000);
            setTimeout(() => testTouchFriendliness(), 1500);
            setTimeout(() => testReadability(), 2000);
        }

        function testViewportSize() {
            const { width, height } = currentDevice;
            
            if (width < 768) {
                addTestResult('üì± Testando layout mobile', 'success');
                if (width < 320) {
                    addTestResult('‚ö†Ô∏è Largura muito pequena - pode haver problemas de layout', 'warning');
                }
            } else if (width < 1024) {
                addTestResult('üíª Testando layout tablet', 'success');
            } else {
                addTestResult('üñ•Ô∏è Testando layout desktop', 'success');
            }

            // Verificar aspect ratio
            const ratio = width / height;
            if (ratio < 0.5 || ratio > 3) {
                addTestResult('‚ö†Ô∏è Aspect ratio extremo - verificar layout', 'warning');
            }
        }

        function testScrollability() {
            addTestResult('üìú Testando navegabilidade...', 'success');
            
            // Simular teste de scroll
            if (currentDevice.width < 768) {
                addTestResult('üëÜ Mobile: Scroll vertical deve ser suave', 'success');
            }
            
            if (currentDevice.height < 600) {
                addTestResult('‚ö†Ô∏è Altura baixa - verificar se conte√∫do √© acess√≠vel', 'warning');
            }
        }

        function testTouchFriendliness() {
            const { width } = currentDevice;
            
            if (width < 768) {
                addTestResult('üëÜ Testando elementos touch-friendly...', 'success');
                addTestResult('‚úÖ Bot√µes devem ter pelo menos 44px de altura', 'success');
                addTestResult('‚úÖ Links devem ter espa√ßamento adequado', 'success');
            } else {
                addTestResult('üñ±Ô∏è Testando intera√ß√£o com mouse/trackpad', 'success');
            }
        }

        function testReadability() {
            addTestResult('üëÄ Testando legibilidade...', 'success');
            
            if (currentDevice.width < 480) {
                addTestResult('üì± Mobile: Texto deve ter pelo menos 16px', 'success');
            }
            
            addTestResult('‚úÖ Contraste de cores deve ser adequado', 'success');
            addTestResult('‚úÖ Linha de texto n√£o deve ser muito longa', 'success');
        }

        function analyzeLayout() {
            const analysisDiv = document.getElementById('layout-analysis');
            analysisDiv.innerHTML = '<p>üîç Analisando layout...</p>';
            
            setTimeout(() => {
                const iframe = document.getElementById('app-iframe');
                const { width, height } = currentDevice;
                
                let analysis = `
                    <div class="test-results">
                        <div class="result-item result-success">üìê Dimens√µes: ${width}x${height}px</div>
                        <div class="result-item result-success">üì± Breakpoint: ${getBreakpoint(width)}</div>
                        <div class="result-item result-success">üîÑ Orienta√ß√£o: ${width > height ? 'Landscape' : 'Portrait'}</div>
                `;

                // An√°lises baseadas no tamanho
                if (width < 768) {
                    analysis += `
                        <div class="result-item result-success">‚úÖ Layout mobile detectado</div>
                        <div class="result-item result-warning">‚ö†Ô∏è Verifique: Menu hamburger funcional</div>
                        <div class="result-item result-warning">‚ö†Ô∏è Verifique: Formul√°rios us√°veis</div>
                        <div class="result-item result-warning">‚ö†Ô∏è Verifique: Tabelas responsivas</div>
                    `;
                } else if (width < 1024) {
                    analysis += `
                        <div class="result-item result-success">‚úÖ Layout tablet detectado</div>
                        <div class="result-item result-warning">‚ö†Ô∏è Verifique: Sidebar colaps√°vel</div>
                        <div class="result-item result-warning">‚ö†Ô∏è Verifique: Navega√ß√£o adaptada</div>
                    `;
                } else {
                    analysis += `
                        <div class="result-item result-success">‚úÖ Layout desktop detectado</div>
                        <div class="result-item result-success">‚úÖ Espa√ßo adequado para conte√∫do</div>
                    `;
                }

                // Recomenda√ß√µes espec√≠ficas
                if (width < 375) {
                    analysis += '<div class="result-item result-error">‚ùå Muito estreito - considere scroll horizontal</div>';
                }
                
                if (height < 500) {
                    analysis += '<div class="result-item result-warning">‚ö†Ô∏è Altura baixa - conte√∫do pode ficar cortado</div>';
                }

                analysis += '</div>';
                analysisDiv.innerHTML = analysis;
            }, 1000);
        }

        // Inicializa√ß√£o
        document.addEventListener('DOMContentLoaded', function() {
            updateMetrics();
            updateDeviceInfo();
            
            // Testar conectividade com iframe
            const iframe = document.getElementById('app-iframe');
            iframe.onload = function() {
                addTestResult('‚úÖ Aplica√ß√£o carregada com sucesso', 'success');
            };
            
            iframe.onerror = function() {
                addTestResult('‚ùå Erro ao carregar aplica√ß√£o', 'error');
            };
            
            // Listener para redimensionamento da janela
            window.addEventListener('resize', function() {
                if (currentDevice.width > 1000) {
                    const simulator = document.getElementById('device-simulator');
                    const scale = Math.min(1, (window.innerWidth - 100) / currentDevice.width);
                    simulator.style.transform = `scale(${scale})`;
                }
            });
        });

        // Atalhos de teclado
        document.addEventListener('keydown', function(e) {
            if (e.altKey) {
                switch(e.key) {
                    case '1': setDevice('mobile', 375, 667); break;
                    case '2': setDevice('tablet', 768, 1024); break;
                    case '3': setDevice('laptop', 1024, 768); break;
                    case '4': setDevice('desktop', 1200, 800); break;
                    case 'r': rotateDevice(); break;
                }
            }
        });
    </script>
</body>
</html>