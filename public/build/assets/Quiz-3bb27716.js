import{r as a,a as e,j as t,F as C,x as se,G as ne,S as j,A as D}from"./app-2033c2ba.js";import{A as O}from"./AuthenticatedLayout-e732cd47.js";import"./ApplicationLogo-fbe97745.js";import"./transition-997472bc.js";function ie({title:u,titleId:i,...h},g){return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:g,"aria-labelledby":i},h),u?a.createElement("title",{id:i},u):null,a.createElement("path",{fillRule:"evenodd",d:"M2.25 12c0-5.385 4.365-9.75 9.75-9.75s9.75 4.365 9.75 9.75-4.365 9.75-9.75 9.75S2.25 17.385 2.25 12Zm13.36-1.814a.75.75 0 1 0-1.22-.872l-3.236 4.53L9.53 12.22a.75.75 0 0 0-1.06 1.06l2.25 2.25a.75.75 0 0 0 1.14-.094l3.75-5.25Z",clipRule:"evenodd"}))}const oe=a.forwardRef(ie),de=oe;function ce({title:u,titleId:i,...h},g){return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:g,"aria-labelledby":i},h),u?a.createElement("title",{id:i},u):null,a.createElement("path",{fillRule:"evenodd",d:"M12 2.25c-5.385 0-9.75 4.365-9.75 9.75s4.365 9.75 9.75 9.75 9.75-4.365 9.75-9.75S17.385 2.25 12 2.25Zm-1.72 6.97a.75.75 0 1 0-1.06 1.06L10.94 12l-1.72 1.72a.75.75 0 1 0 1.06 1.06L12 13.06l1.72 1.72a.75.75 0 1 0 1.06-1.06L13.06 12l1.72-1.72a.75.75 0 1 0-1.06-1.06L12 10.94l-1.72-1.72Z",clipRule:"evenodd"}))}const me=a.forwardRef(ce),ue=me;function he({quizResult:u,courseId:i,onClose:h}){if(!u)return null;const{score:g,total:k,percentage:n,points_earned:S,detailed_results:s}=u,f=()=>n>=80?"text-green-600":n>=60?"text-yellow-600":"text-red-600",x=()=>n>=80?"Excelente trabalho!":n>=60?"Bom trabalho!":"Continue estudando!";return e("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:t("div",{className:"relative top-20 mx-auto p-8 border w-11/12 max-w-4xl shadow-lg rounded-md bg-white",children:[t("div",{className:"text-center mb-8",children:[e("h2",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Resultado do Quiz"}),e("p",{className:`text-xl font-semibold ${f()}`,children:x()})]}),n<70&&e("div",{className:"bg-red-50 border-2 border-red-300 p-6 mb-6 rounded-xl",children:t("div",{className:"flex items-start gap-4",children:[e("div",{className:"text-4xl",children:"‚ö†Ô∏è"}),t("div",{children:[e("h3",{className:"text-xl font-bold text-red-700 mb-2",children:"Nota Insuficiente para Progress√£o"}),t("p",{className:"text-red-600 mb-3",children:["Voc√™ precisa de ",e("strong",{children:"pelo menos 70%"})," para desbloquear as pr√≥ximas atividades."]}),t("p",{className:"text-red-600",children:["Sua nota atual: ",t("strong",{children:[n.toFixed(0),"%"]})]})]})]})}),t("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[t("div",{className:"bg-blue-50 rounded-lg p-6 text-center",children:[e("p",{className:"text-sm text-blue-600 font-medium mb-2",children:"Pontua√ß√£o"}),t("p",{className:"text-4xl font-bold text-blue-900",children:[g,"/",k]})]}),t("div",{className:"bg-purple-50 rounded-lg p-6 text-center",children:[e("p",{className:"text-sm text-purple-600 font-medium mb-2",children:"Percentual"}),t("p",{className:`text-4xl font-bold ${f()}`,children:[n.toFixed(1),"%"]})]}),t("div",{className:"bg-green-50 rounded-lg p-6 text-center",children:[e("p",{className:"text-sm text-green-600 font-medium mb-2",children:"Pontos Ganhos"}),e("p",{className:"text-4xl font-bold text-green-900",children:S})]})]}),t("div",{className:"mb-8",children:[e("h3",{className:"text-xl font-bold text-gray-900 mb-4",children:"Revis√£o das Quest√µes"}),e("div",{className:"space-y-4 max-h-96 overflow-y-auto",children:s.map((o,b)=>e("div",{className:`p-4 rounded-lg border-2 ${o.is_correct?"bg-green-50 border-green-200":"bg-red-50 border-red-200"}`,children:t("div",{className:"flex items-start gap-3",children:[e("div",{className:"flex-shrink-0 mt-1",children:o.is_correct?e(de,{className:"w-6 h-6 text-green-600"}):e(ue,{className:"w-6 h-6 text-red-600"})}),t("div",{className:"flex-1",children:[t("p",{className:"font-medium text-gray-900 mb-2",children:[b+1,". ",o.question]}),t("div",{className:"text-sm space-y-1",children:[t("p",{children:[e("span",{className:"font-medium",children:"Sua resposta:"})," ",e("span",{className:o.is_correct?"text-green-700":"text-red-700",children:o.user_answer!==null?String.fromCharCode(65+o.user_answer):"N√£o respondida"})]}),!o.is_correct&&t("p",{children:[e("span",{className:"font-medium",children:"Resposta correta:"})," ",e("span",{className:"text-green-700",children:String.fromCharCode(65+o.correct_answer)})]}),o.explanation&&t("p",{className:"mt-2 text-gray-600 italic",children:[e("span",{className:"font-medium not-italic",children:"Explica√ß√£o:"})," ",o.explanation]})]})]})]})},b))})]}),e("div",{className:"p-6 bg-gray-50 rounded-b-2xl flex gap-4",children:n<70?t(C,{children:[e("button",{onClick:()=>window.location.reload(),className:"flex-1 px-6 py-3 bg-gradient-to-r from-orange-500 to-red-600 text-white rounded-xl font-bold hover:from-orange-600 hover:to-red-700 transition-all transform hover:scale-105 shadow-lg",children:"üîÑ Refazer Quiz"}),e("button",{onClick:h,className:"flex-1 px-6 py-3 bg-gray-200 text-gray-700 rounded-xl font-bold hover:bg-gray-300 transition-all",children:"üìö Voltar ao Curso"})]}):t(C,{children:[e(se,{href:"/student/dashboard",className:"flex-1 px-6 py-3 bg-gradient-to-r from-blue-500 to-purple-600 text-white rounded-xl font-bold hover:from-blue-600 hover:to-purple-700 transition-all transform hover:scale-105 shadow-lg text-center",children:"üéØ Ver Dashboard"}),e("button",{onClick:h,className:"flex-1 px-6 py-3 bg-gray-200 text-gray-700 rounded-xl font-bold hover:bg-gray-300 transition-all",children:"üìö Voltar ao Curso"})]})})]})})}function Ne({auth:u,activity:i,course:h,userActivity:g,hasCompleted:k,flash:n}){var _,F;const S=u.user,[s,f]=a.useState(0),[x,o]=a.useState(!1),[b,q]=a.useState(null),[z,I]=a.useState(0),[Q,R]=a.useState(0),[L,T]=a.useState(0),[B,V]=a.useState(new Set),[Z,$]=a.useState([]),[M,A]=a.useState(!1),[G,E]=a.useState(!1),[X,Y]=a.useState(!!(n!=null&&n.quiz_result)),N=a.useRef(null),c=((_=i.content)==null?void 0:_.questions)||[],{data:v,setData:H,post:U,processing:P,errors:xe}=ne({answers:{}}),W=()=>{navigator.vibrate&&navigator.vibrate([100,50,100])},J=()=>{navigator.vibrate&&navigator.vibrate([200])},K=()=>{const r=[];for(let l=0;l<12;l++)r.push({id:Math.random(),x:Math.random()*window.innerWidth,y:Math.random()*window.innerHeight,delay:Math.random()*.5});$(r),setTimeout(()=>$([]),2e3)},ee=(r,l)=>{if(x)return;const p=c[r],m=l===p.correct;if(H("answers",{...v.answers,[r]:l}),V(d=>new Set([...d,r])),m&&!B.has(r)){const d=Math.round(i.points_value/c.length);I(y=>y+d),R(y=>y+1),T(y=>Math.max(y,Q+1)),W(),K()}else m||(R(0),J(),A(!0),setTimeout(()=>A(!1),600));q(m),o(!0),N.current=setTimeout(()=>{o(!1),N.current=null,r<c.length-1&&f(r+1)},5e3)},te=()=>{N.current&&(clearTimeout(N.current),N.current=null),o(!1),s<c.length-1&&f(s+1)},ae=()=>{x||s>0&&f(s-1)},re=()=>{x||(E(!0),setTimeout(()=>E(!1),3e3),setTimeout(()=>{U(route("student.quiz.submit",i.id))},1e3))},le=()=>c.every((r,l)=>v.answers.hasOwnProperty(l));if(c.length===0)return t(O,{user:S,header:e("h2",{className:"font-semibold text-xl text-gray-800 leading-tight",children:"Quiz"}),children:[e(j,{title:`Quiz: ${i.title}`}),e("div",{className:"py-8",children:e("div",{className:"max-w-4xl mx-auto sm:px-6 lg:px-8 text-center",children:t("div",{className:"bg-white rounded-xl shadow-lg p-8",children:[e("div",{className:"text-6xl mb-4",children:"‚ùì"}),e("h2",{className:"text-2xl font-bold mb-4",children:"Nenhuma quest√£o dispon√≠vel"}),e("p",{className:"text-gray-600",children:"Este quiz ainda n√£o possui quest√µes configuradas."})]})})})]});const w=c[s];return t(O,{user:S,header:t("div",{className:"flex items-center justify-between",children:[t("h2",{className:"font-semibold text-xl text-gray-800 leading-tight",children:["üéØ ",i.title]}),t("div",{className:"flex items-center space-x-4 text-sm",children:[t("div",{className:"bg-blue-100 text-blue-800 px-3 py-1 rounded-full font-medium",children:["üéØ ",z," pts"]}),t("div",{className:"text-gray-600",children:[s+1,"/",c.length]})]})]}),children:[e(j,{title:`Quiz: ${i.title}`}),e("div",{className:"fixed inset-0 pointer-events-none z-50",children:Z.map(r=>e("div",{className:"absolute text-2xl animate-bounce",style:{left:r.x,top:r.y,animationDelay:`${r.delay}s`,animationDuration:"1s"},children:"‚≠ê"},r.id))}),G&&e("div",{className:"fixed inset-0 pointer-events-none z-50",children:[...Array(50)].map((r,l)=>e("div",{className:"absolute animate-ping",style:{left:`${Math.random()*100}%`,top:`${Math.random()*100}%`,animationDelay:`${Math.random()*2}s`,fontSize:"24px"},children:["üéâ","üéä","‚≠ê","üí´","‚ú®"][Math.floor(Math.random()*5)]},l))}),e("div",{className:`py-8 transition-all duration-300 ${M?"animate-pulse":""}`,children:t("div",{className:"max-w-4xl mx-auto sm:px-6 lg:px-8",children:[(i.order===2||((F=i.content)==null?void 0:F.quiz_number)===1)&&e("div",{className:"mb-6 animate-pulse",children:e("div",{className:"bg-gradient-to-r from-purple-600 via-pink-600 to-yellow-500 rounded-xl shadow-2xl overflow-hidden transform hover:scale-105 transition-all duration-300",children:t("div",{className:"p-6 text-white",children:[t("div",{className:"flex items-center justify-center mb-4",children:[e("div",{className:"text-4xl mr-3 animate-bounce",children:"üéØ"}),e("h3",{className:"text-2xl font-bold tracking-wide",children:"DESBLOQUEIE O DESAFIO FINAL!"})]}),t("p",{className:"text-center text-lg mb-4 font-medium",children:["Complete ",e("span",{className:"font-bold text-yellow-300",children:"TODAS as atividades"})," e enfrente o",e("span",{className:"font-bold text-yellow-300",children:" DESAFIO FINAL"}),"! üèÜ"]}),e("div",{className:"bg-white/10 backdrop-blur-sm rounded-lg p-4 mb-4",children:t("div",{className:"flex items-center justify-center space-x-2 flex-wrap",children:[t("div",{className:"flex items-center space-x-1 bg-white/20 px-3 py-1 rounded-full",children:[e("span",{className:"text-2xl",children:"üü¢"}),e("span",{className:"text-sm font-bold",children:"F√°cil"})]}),e("span",{className:"text-2xl",children:"‚Üí"}),t("div",{className:"flex items-center space-x-1 bg-white/20 px-3 py-1 rounded-full",children:[e("span",{className:"text-2xl",children:"üü°"}),e("span",{className:"text-sm font-bold",children:"M√©dio"})]}),e("span",{className:"text-2xl",children:"‚Üí"}),t("div",{className:"flex items-center space-x-1 bg-white/20 px-3 py-1 rounded-full",children:[e("span",{className:"text-2xl",children:"üî¥"}),e("span",{className:"text-sm font-bold",children:"Dif√≠cil"})]}),e("span",{className:"text-2xl",children:"‚Üí"}),t("div",{className:"flex items-center space-x-1 bg-yellow-400 text-purple-900 px-3 py-1 rounded-full",children:[e("span",{className:"text-2xl",children:"üëë"}),e("span",{className:"text-xs font-bold",children:"Mestre do Curso"})]})]})}),t("div",{className:"bg-yellow-400/90 text-purple-900 rounded-lg p-3 text-center",children:[t("div",{className:"flex items-center justify-center flex-wrap gap-2",children:[e("span",{className:"text-2xl",children:"üéÅ"}),e("span",{className:"font-bold text-lg",children:"Pontos DOBRADOS + Badge Exclusivo!"}),e("span",{className:"text-2xl",children:"‚ú®"})]}),e("p",{className:"text-sm font-medium mt-2 opacity-90",children:"Coopere com colegas usando mensagens Skinnerianas"})]}),e("div",{className:"text-center mt-4",children:e("p",{className:"text-sm font-medium opacity-90",children:"üí™ Continue estudando para desbloquear esta experi√™ncia √©pica!"})})]})})}),t("div",{className:"grid grid-cols-3 gap-4 mb-6",children:[t("div",{className:"bg-gradient-to-r from-yellow-400 to-orange-500 text-white rounded-xl p-4 text-center",children:[e("div",{className:"text-2xl font-bold animate-pulse",children:z}),e("div",{className:"text-sm opacity-90",children:"Pontos"})]}),t("div",{className:"bg-gradient-to-r from-green-400 to-blue-500 text-white rounded-xl p-4 text-center",children:[e("div",{className:"text-2xl font-bold",children:Q}),e("div",{className:"text-sm opacity-90",children:"Sequ√™ncia"})]}),t("div",{className:"bg-gradient-to-r from-purple-500 to-pink-500 text-white rounded-xl p-4 text-center",children:[e("div",{className:"text-2xl font-bold",children:L}),e("div",{className:"text-sm opacity-90",children:"Recorde"})]})]}),t("div",{className:"mb-8",children:[t("div",{className:"flex justify-between text-sm text-gray-600 mb-2",children:[e("span",{className:"font-medium",children:"Progresso do Quiz"}),t("span",{className:"font-bold text-blue-600",children:[Math.round((s+1)/c.length*100),"%"]})]}),e("div",{className:"w-full bg-gray-200 rounded-full h-4 shadow-inner",children:e("div",{className:"bg-gradient-to-r from-blue-500 via-purple-500 to-pink-500 h-4 rounded-full transition-all duration-700 relative overflow-hidden",style:{width:`${(s+1)/c.length*100}%`},children:e("div",{className:"absolute inset-0 bg-white opacity-30 animate-pulse"})})})]}),e("div",{className:`bg-white rounded-xl shadow-2xl overflow-hidden transition-all duration-300 ${M?"animate-bounce border-4 border-red-500":""}`,children:t("div",{className:"p-8",children:[e("div",{className:"flex items-center justify-center mb-6",children:t("div",{className:"bg-gradient-to-r from-blue-500 to-purple-600 text-white px-6 py-2 rounded-full font-bold text-lg",children:["Quest√£o ",s+1]})}),e("div",{className:"mb-8 text-center",children:e("h2",{className:"text-3xl font-bold text-gray-900 mb-4 leading-tight",children:w.question})}),e("div",{className:"space-y-4 mb-8",children:w.options.map((r,l)=>{const p=v.answers[s]===l,m=l===w.correct,d=x;return e("button",{onClick:()=>ee(s,l),disabled:x,className:`w-full text-left p-6 rounded-xl border-3 transition-all duration-300 transform hover:scale-105 ${d&&m?"border-green-500 bg-green-100 text-green-900 animate-pulse":d&&p&&!m?"border-red-500 bg-red-100 text-red-900 animate-bounce":p&&!d?"border-blue-500 bg-blue-100 text-blue-900 scale-105":"border-gray-200 bg-gray-50 hover:border-gray-400 hover:bg-gray-100 hover:shadow-lg"}`,children:t("div",{className:"flex items-center",children:[e("div",{className:`w-8 h-8 rounded-full border-3 mr-4 flex items-center justify-center text-lg font-bold transition-all ${d&&m?"border-green-500 bg-green-500 text-white":d&&p&&!m?"border-red-500 bg-red-500 text-white":p&&!d?"border-blue-500 bg-blue-500 text-white":"border-gray-300"}`,children:d&&m?"‚úì":d&&p&&!m?"‚úó":p?"‚óè":String.fromCharCode(65+l)}),e("span",{className:"text-xl font-medium flex-1",children:r}),d&&m&&e("div",{className:"text-2xl animate-spin",children:"‚≠ê"}),d&&p&&!m&&e("div",{className:"text-2xl animate-bounce",children:"üí•"})]})},l)})}),x&&t("div",{className:`p-6 rounded-xl mb-6 animate-fadeIn border-2 ${b?"bg-green-50 border-green-200":"bg-red-50 border-red-200"}`,children:[t("div",{className:"flex items-center mb-3",children:[e("div",{className:"text-3xl mr-3",children:b?"üéâ":"üòÖ"}),e("h3",{className:`text-xl font-bold ${b?"text-green-800":"text-red-800"}`,children:b?"Parab√©ns! Resposta Correta!":"Ops! Resposta Incorreta"})]}),w.explanation&&e("div",{className:`p-4 rounded-lg ${b?"bg-green-100":"bg-blue-100"}`,children:t("div",{className:"flex items-start",children:[e("span",{className:"text-xl mr-2",children:"üí°"}),t("div",{children:[e("span",{className:"font-medium text-gray-900",children:"Explica√ß√£o:"}),e("p",{className:"text-gray-800 text-sm mt-1",children:w.explanation})]})]})})]}),t("div",{className:"flex justify-between items-center",children:[e("button",{onClick:ae,disabled:s===0||x,className:"px-6 py-3 text-gray-600 hover:text-gray-800 disabled:opacity-50 disabled:cursor-not-allowed transition-all font-medium",children:"‚Üê Anterior"}),e("div",{className:"flex space-x-2",children:c.map((r,l)=>e("div",{className:`w-4 h-4 rounded-full transition-all duration-300 ${l===s?"bg-blue-500 scale-125 animate-pulse":v.answers.hasOwnProperty(l)?"bg-green-500":"bg-gray-300"}`},l))}),s===c.length-1?k?t("div",{className:"text-center p-4 bg-green-50 rounded-xl border border-green-200",children:[e("p",{className:"text-lg text-green-700 font-bold mb-3",children:"‚úÖ Quiz j√° completado!"}),e("button",{onClick:()=>D.visit(route("student.courses.show",h.id)),className:"px-6 py-3 bg-blue-500 text-white rounded-xl font-bold hover:bg-blue-600 transition-all duration-200 transform hover:scale-105",children:"üìö Voltar ao Curso"})]}):e("button",{onClick:re,disabled:!le()||P||x,className:"px-8 py-3 bg-gradient-to-r from-green-500 to-green-600 text-white rounded-xl font-bold hover:from-green-600 hover:to-green-700 disabled:bg-gray-400 disabled:cursor-not-allowed transition-all duration-200 transform hover:scale-105 shadow-lg",children:P?t(C,{children:[e("span",{className:"animate-spin mr-2",children:"‚è≥"}),"Finalizando..."]}):t(C,{children:[e("span",{className:"mr-2",children:"üèÜ"}),"Finalizar Quiz"]})}):e("button",{onClick:te,disabled:!v.answers.hasOwnProperty(s),className:"px-6 py-3 bg-gradient-to-r from-blue-500 to-purple-600 text-white rounded-xl font-bold hover:from-blue-600 hover:to-purple-700 disabled:bg-gray-400 disabled:cursor-not-allowed transition-all duration-200 transform hover:scale-105 shadow-lg",children:"Pr√≥xima ‚Üí"})]})]})})]})}),e("style",{children:`
                @keyframes fadeIn {
                    from { opacity: 0; transform: translateY(20px); }
                    to { opacity: 1; transform: translateY(0); }
                }
                .animate-fadeIn {
                    animation: fadeIn 0.5s ease-out;
                }
            `}),X&&(n==null?void 0:n.quiz_result)&&e(he,{quizResult:n.quiz_result,courseId:h.id,onClose:()=>{Y(!1),D.visit(route("student.courses.show",h.id))}})]})}export{Ne as default};
