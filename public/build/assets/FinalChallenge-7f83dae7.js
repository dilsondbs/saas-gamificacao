import{r as o,G as oe,j as a,a as e,S as le,A as I}from"./app-2033c2ba.js";import{A as de}from"./AuthenticatedLayout-e732cd47.js";import"./ApplicationLogo-fbe97745.js";import"./transition-997472bc.js";const F=[{title:"Refor√ßo de Dedica√ß√£o",message:"Sua **dedica√ß√£o cont√≠nua** em completar todas as atividades gerou **resultados mensur√°veis**. Esse **comportamento de estudo consistente** √© a chave do sucesso. Continue refor√ßando esse padr√£o!"},{title:"Refor√ßo de Progresso",message:"Cada **atividade que voc√™ completou** refor√ßou seu **aprendizado efetivo**. Seu **progresso vis√≠vel** √© **consequ√™ncia direta** de suas a√ß√µes repetidas. Mantenha esse ciclo!"},{title:"Refor√ßo de Colabora√ß√£o",message:"O **ambiente colaborativo** que voc√™ ajuda a criar **beneficia todo o grupo**. Seu **comportamento de engajamento** serve como **modelo positivo**. Continue contribuindo!"},{title:"Refor√ßo de Persist√™ncia",message:"Sua **persist√™ncia em superar desafios** demonstrou que **comportamentos consistentes geram resultados**. Cada tentativa te aproximou da meta. Persista nessa estrat√©gia!"},{title:"Refor√ßo de Melhoria",message:"A **evolu√ß√£o no seu desempenho** mostra que **pr√°tica repetida gera aperfei√ßoamento**. Seu **comportamento de revis√£o e estudo** est√° produzindo **consequ√™ncias positivas mensur√°veis**!"},{title:"Refor√ßo de Resultados",message:"Os **resultados que voc√™ alcan√ßou** s√£o a **consequ√™ncia natural** do seu **comportamento disciplinado**. Continue aplicando essas **a√ß√µes produtivas** para manter o padr√£o de excel√™ncia!"}],ie=b=>{const S=["comportamento","consequ√™ncia","resultado","a√ß√£o","refor√ßo","progresso","dedica√ß√£o","padr√£o","persist√™ncia"].some(f=>b.toLowerCase().includes(f)),l=b.length>=50,r=b.includes("**");return{valid:S&&l,hasKeyword:S,hasLength:l,hasBold:r}};function be({auth:b,course:u,challenge:S,attempts:l,progress:r,eligibleStudents:f=[],receivedMotivations:q=[],sentMotivations:M=[]}){const A=b.user,[v,p]=o.useState("levels"),[ce,V]=o.useState(null),[j,E]=o.useState(!1),[N,D]=o.useState(0),[d,C]=o.useState(0),[m,B]=o.useState([]),[K,Q]=o.useState(null),[X,z]=o.useState(null),[h,O]=o.useState(null),[J,P]=o.useState(null),[g,_]=o.useState(""),[i,T]=o.useState([]),[c,H]=o.useState({valid:!1}),k=o.useRef(null),{data:y,setData:$,post:me,processing:w}=oe({answers:{}});o.useEffect(()=>{if(j&&N>0)return k.current=setInterval(()=>{D(t=>t<=1?(L(),0):t-1)},1e3),()=>clearInterval(k.current)},[j,N]),o.useEffect(()=>{H(ie(g))},[g]);const R=async t=>{try{const n=await(await fetch(route("student.challenge.start",u.id),{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]').content},body:JSON.stringify({level:t})})).json();n.success&&(V(t),B(n.questions),Q(n.attempt_id),D(n.time_limit_minutes*60),z(Date.now()),C(0),E(!0),p("playing"),$("answers",{}))}catch(s){console.error("Erro ao iniciar desafio:",s),alert("Erro ao iniciar o desafio. Tente novamente.")}},L=async()=>{if(w)return;const t=Math.floor((Date.now()-X)/1e3);try{const n=await(await fetch(route("student.challenge.submit",u.id),{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]').content},body:JSON.stringify({attempt_id:K,answers:Object.entries(y.answers).map(([x,ne])=>({question_index:parseInt(x),selected:String.fromCharCode(65+ne)})),time_spent:t})})).json();n.success&&(O(n),E(!1),p("result"),clearInterval(k.current))}catch(s){console.error("Erro ao submeter:",s),alert("Erro ao enviar respostas. Tente novamente.")}},G=(t,s)=>{$("answers",{...y.answers,[t]:s})},U=t=>{P(t),_(F[t].message)},W=async()=>{if(!c.valid||i.length===0){alert("Selecione pelo menos um aluno e escreva uma mensagem v√°lida seguindo os princ√≠pios Skinnerianos.");return}try{const s=await(await fetch(route("student.challenge.motivation.send",u.id),{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]').content},body:JSON.stringify({receiver_ids:i,message:g})})).json();s.success&&(alert(`‚úÖ ${s.message}`),_(""),T([]),P(null),I.reload())}catch(t){console.error("Erro ao enviar motiva√ß√£o:",t),alert("Erro ao enviar motiva√ß√£o. Tente novamente.")}},Y=async t=>{try{const n=await(await fetch(route("student.challenge.motivation.confirm",t),{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]').content}})).json();n.success&&(alert(`üéâ ${n.message}`),I.reload())}catch(s){console.error("Erro ao confirmar motiva√ß√£o:",s),alert("Erro ao confirmar. Tente novamente.")}},Z=t=>{i.includes(t)?T(i.filter(s=>s!==t)):i.length<5?T([...i,t]):alert("Voc√™ pode selecionar no m√°ximo 5 alunos.")},ee=t=>{const s=Math.floor(t/60),n=t%60;return`${s}:${n.toString().padStart(2,"0")}`},te=()=>a("div",{className:"max-w-7xl mx-auto px-4 py-8",children:[a("div",{className:"bg-white rounded-xl shadow-lg p-8 mb-6",children:[a("h1",{className:"text-3xl font-bold text-center mb-4",children:["üèÜ Desafio Final: ",u.title]}),e("p",{className:"text-gray-600 text-center mb-6",children:"Complete os 3 n√≠veis para desbloquear o sistema de coopera√ß√£o e dobrar seus pontos!"})]}),a("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[a("div",{className:`bg-white rounded-xl shadow-lg p-6 border-4 ${r.easy_passed?"border-green-500":"border-green-300"}`,children:[a("div",{className:"text-center mb-4",children:[e("div",{className:"text-6xl mb-2",children:"üü¢"}),e("h2",{className:"text-2xl font-bold text-green-700",children:"F√ÅCIL"}),r.easy_passed&&e("span",{className:"text-sm text-green-600",children:"‚úÖ Completado"})]}),a("div",{className:"text-sm text-gray-600 space-y-2 mb-4",children:[e("p",{children:"‚è±Ô∏è Tempo: 20 minutos"}),e("p",{children:"üìä Score m√≠nimo: 60%"}),e("p",{children:"‚ùì 10 quest√µes"})]}),l.easy&&l.easy.length>0&&a("div",{className:"bg-green-50 p-3 rounded-lg mb-4",children:[e("p",{className:"text-sm font-medium",children:"Melhor tentativa:"}),a("p",{className:"text-2xl font-bold text-green-700",children:[Math.max(...l.easy.map(t=>t.score)),"%"]})]}),e("button",{onClick:()=>R("easy"),disabled:w,className:"w-full py-3 bg-green-500 text-white rounded-lg font-bold hover:bg-green-600 disabled:bg-gray-400 transition",children:r.easy_passed?"üîÑ Tentar Novamente":"üöÄ Iniciar F√°cil"})]}),a("div",{className:`bg-white rounded-xl shadow-lg p-6 border-4 ${r.medium_passed?"border-yellow-500":r.easy_passed?"border-yellow-300":"border-gray-300"}`,children:[a("div",{className:"text-center mb-4",children:[e("div",{className:"text-6xl mb-2",children:"üü°"}),e("h2",{className:"text-2xl font-bold text-yellow-700",children:"M√âDIO"}),r.medium_passed&&e("span",{className:"text-sm text-yellow-600",children:"‚úÖ Completado"}),!r.easy_passed&&e("span",{className:"text-sm text-gray-500",children:"üîí Bloqueado"})]}),a("div",{className:"text-sm text-gray-600 space-y-2 mb-4",children:[e("p",{children:"‚è±Ô∏è Tempo: 20 minutos"}),e("p",{children:"üìä Score m√≠nimo: 70%"}),e("p",{children:"‚ùì 10 quest√µes"})]}),l.medium&&l.medium.length>0&&a("div",{className:"bg-yellow-50 p-3 rounded-lg mb-4",children:[e("p",{className:"text-sm font-medium",children:"Melhor tentativa:"}),a("p",{className:"text-2xl font-bold text-yellow-700",children:[Math.max(...l.medium.map(t=>t.score)),"%"]})]}),e("button",{onClick:()=>R("medium"),disabled:!r.easy_passed||w,className:"w-full py-3 bg-yellow-500 text-white rounded-lg font-bold hover:bg-yellow-600 disabled:bg-gray-400 transition",children:r.medium_passed?"üîÑ Tentar Novamente":"üöÄ Iniciar M√©dio"})]}),a("div",{className:`bg-white rounded-xl shadow-lg p-6 border-4 ${r.hard_passed?"border-red-500":r.medium_passed?"border-red-300":"border-gray-300"}`,children:[a("div",{className:"text-center mb-4",children:[e("div",{className:"text-6xl mb-2",children:"üî¥"}),e("h2",{className:"text-2xl font-bold text-red-700",children:"DIF√çCIL"}),r.hard_passed&&e("span",{className:"text-sm text-red-600",children:"‚úÖ Completado"}),!r.medium_passed&&e("span",{className:"text-sm text-gray-500",children:"üîí Bloqueado"})]}),a("div",{className:"text-sm text-gray-600 space-y-2 mb-4",children:[e("p",{children:"‚è±Ô∏è Tempo: 20 minutos"}),e("p",{children:"üìä Score m√≠nimo: 80%"}),e("p",{children:"‚ùì 10 quest√µes"})]}),l.hard&&l.hard.length>0&&a("div",{className:"bg-red-50 p-3 rounded-lg mb-4",children:[e("p",{className:"text-sm font-medium",children:"Melhor tentativa:"}),a("p",{className:"text-2xl font-bold text-red-700",children:[Math.max(...l.hard.map(t=>t.score)),"%"]})]}),e("button",{onClick:()=>R("hard"),disabled:!r.medium_passed||w,className:"w-full py-3 bg-red-500 text-white rounded-lg font-bold hover:bg-red-600 disabled:bg-gray-400 transition",children:r.hard_passed?"üîÑ Tentar Novamente":"üöÄ Iniciar Dif√≠cil"})]})]}),r.all_levels_passed&&a("div",{className:"bg-gradient-to-r from-purple-500 to-pink-500 text-white rounded-xl shadow-lg p-8 text-center",children:[e("div",{className:"text-6xl mb-4",children:"üéâ"}),e("h2",{className:"text-3xl font-bold mb-4",children:"Parab√©ns! Voc√™ completou todos os n√≠veis!"}),e("p",{className:"text-lg mb-6",children:"Agora voc√™ pode participar do Sistema de Refor√ßo Comportamental M√∫tuo"}),e("button",{onClick:()=>p("cooperation"),className:"px-8 py-4 bg-white text-purple-600 rounded-xl font-bold text-lg hover:bg-gray-100 transition transform hover:scale-105",children:"ü§ù Acessar Sistema de Coopera√ß√£o"})]})]}),ae=()=>{if(!m||m.length===0)return null;const t=m[d];return a("div",{className:"max-w-4xl mx-auto px-4 py-8",children:[a("div",{className:"bg-white rounded-xl shadow-lg p-6 mb-6",children:[a("div",{className:"flex justify-between items-center mb-4",children:[e("div",{children:a("span",{className:"text-lg font-bold",children:["Quest√£o ",d+1,"/",m.length]})}),a("div",{className:`text-2xl font-bold ${N<60?"text-red-600 animate-pulse":"text-blue-600"}`,children:["‚è±Ô∏è ",ee(N)]})]}),e("div",{className:"w-full bg-gray-200 rounded-full h-4",children:e("div",{className:"bg-gradient-to-r from-blue-500 to-purple-600 h-4 rounded-full transition-all",style:{width:`${(d+1)/m.length*100}%`}})})]}),a("div",{className:"bg-white rounded-xl shadow-lg p-8",children:[e("h2",{className:"text-2xl font-bold mb-6",children:t.question}),e("div",{className:"space-y-4",children:t.options.map((s,n)=>{const x=y.answers[d]===n;return e("button",{onClick:()=>G(d,n),className:`w-full text-left p-4 rounded-lg border-2 transition ${x?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-gray-400"}`,children:a("div",{className:"flex items-center",children:[e("div",{className:`w-6 h-6 rounded-full border-2 mr-4 flex items-center justify-center ${x?"border-blue-500 bg-blue-500":"border-gray-300"}`,children:x&&e("span",{className:"text-white text-sm",children:"‚úì"})}),a("span",{className:"font-medium",children:[String.fromCharCode(65+n),"."]}),e("span",{className:"ml-2",children:s})]})},n)})}),a("div",{className:"flex justify-between mt-8",children:[e("button",{onClick:()=>C(Math.max(0,d-1)),disabled:d===0,className:"px-6 py-3 bg-gray-200 rounded-lg font-medium disabled:opacity-50",children:"‚Üê Anterior"}),d===m.length-1?e("button",{onClick:L,disabled:Object.keys(y.answers).length<m.length,className:"px-8 py-3 bg-green-500 text-white rounded-lg font-bold hover:bg-green-600 disabled:bg-gray-400",children:"‚úÖ Finalizar Desafio"}):e("button",{onClick:()=>C(Math.min(m.length-1,d+1)),className:"px-6 py-3 bg-blue-500 text-white rounded-lg font-medium hover:bg-blue-600",children:"Pr√≥xima ‚Üí"})]})]})]})},se=()=>{if(!h)return null;const t=h.passed,s=h.completed_all_levels;return e("div",{className:"max-w-4xl mx-auto px-4 py-8",children:a("div",{className:`bg-white rounded-xl shadow-lg p-8 text-center ${t?"border-4 border-green-500":"border-4 border-orange-500"}`,children:[e("div",{className:"text-6xl mb-4",children:t?"üéâ":"üìù"}),e("h1",{className:"text-3xl font-bold mb-4",children:t?"Parab√©ns! Voc√™ passou!":"Quase l√°!"}),a("div",{className:"text-6xl font-bold mb-4",style:{color:t?"#10b981":"#f59e0b"},children:[h.score,"%"]}),a("p",{className:"text-lg text-gray-600 mb-6",children:["Score m√≠nimo: ",h.min_score,"% | Nota: ",h.grade]}),t&&e("div",{className:"bg-green-100 border border-green-300 rounded-lg p-4 mb-6",children:e("p",{className:"text-green-800 font-medium",children:h.next_level_unlocked?"üîì Pr√≥ximo n√≠vel desbloqueado!":"‚úÖ N√≠vel conclu√≠do!"})}),s&&a("div",{className:"bg-purple-100 border border-purple-300 rounded-lg p-6 mb-6",children:[e("div",{className:"text-4xl mb-2",children:"üëë"}),e("p",{className:"text-xl font-bold text-purple-800 mb-2",children:"Voc√™ completou TODOS os n√≠veis!"}),e("p",{className:"text-purple-700",children:"Sistema de Coopera√ß√£o desbloqueado!"})]}),a("div",{className:"flex gap-4 justify-center",children:[e("button",{onClick:()=>{p("levels"),O(null)},className:"px-8 py-3 bg-blue-500 text-white rounded-lg font-bold hover:bg-blue-600",children:"üìä Ver N√≠veis"}),s&&e("button",{onClick:()=>p("cooperation"),className:"px-8 py-3 bg-purple-500 text-white rounded-lg font-bold hover:bg-purple-600",children:"ü§ù Sistema de Coopera√ß√£o"})]})]})})},re=()=>a("div",{className:"max-w-6xl mx-auto px-4 py-8",children:[a("div",{className:"bg-gradient-to-r from-purple-600 to-blue-600 text-white rounded-xl shadow-lg p-8 mb-8",children:[e("h1",{className:"text-4xl font-bold text-center mb-4",children:"ü§ù Sistema de Refor√ßo Comportamental M√∫tuo"}),a("p",{className:"text-center text-lg",children:["Baseado em ",e("strong",{children:"B.F. Skinner - An√°lise do Comportamento"}),": Est√≠mulo ‚Üí Resposta ‚Üí Refor√ßo Positivo"]})]}),a("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[a("div",{className:"bg-white rounded-xl shadow-lg p-6",children:[e("h2",{className:"text-2xl font-bold mb-4",children:"üíå Enviar Refor√ßo Comportamental"}),a("div",{className:"mb-6",children:[e("h3",{className:"font-medium text-gray-700 mb-3",children:"üìã Templates Baseados em Skinner:"}),e("div",{className:"grid grid-cols-2 gap-3",children:F.map((t,s)=>e("button",{onClick:()=>U(s),className:`p-3 rounded-lg border-2 text-left transition ${J===s?"border-purple-500 bg-purple-50":"border-gray-200 hover:border-purple-300"}`,children:e("p",{className:"font-medium text-sm",children:t.title})},s))})]}),a("div",{className:"mb-4",children:[e("label",{className:"block font-medium text-gray-700 mb-2",children:"Mensagem de Refor√ßo:"}),e("textarea",{value:g,onChange:t=>_(t.target.value),placeholder:"Escreva uma mensagem de refor√ßo comportamental... Use **negrito** para √™nfase.",className:`w-full h-32 p-3 border-2 rounded-lg ${c.valid?"border-green-500 bg-green-50":g.length>0?"border-red-500 bg-red-50":"border-gray-300"}`}),a("div",{className:"mt-2 text-sm space-y-1",children:[a("p",{className:c.hasLength?"text-green-600":"text-gray-500",children:[c.hasLength?"‚úÖ":"‚óã"," M√≠nimo 50 caracteres (",g.length,"/50)"]}),a("p",{className:c.hasKeyword?"text-green-600":"text-gray-500",children:[c.hasKeyword?"‚úÖ":"‚óã"," Cont√©m termos Skinnerianos"]}),a("p",{className:c.hasBold?"text-green-600":"text-gray-500",children:[c.hasBold?"‚úÖ":"‚óã"," Tem √™nfase (**texto**)"]})]})]}),a("div",{className:"mb-4",children:[a("label",{className:"block font-medium text-gray-700 mb-2",children:["Selecione at√© 5 alunos (",i.length,"/5):"]}),e("div",{className:"space-y-2 max-h-48 overflow-y-auto",children:f.length===0?e("p",{className:"text-gray-500 text-sm",children:"Nenhum aluno eleg√≠vel no momento."}):f.map(t=>a("label",{className:"flex items-center p-2 hover:bg-gray-50 rounded cursor-pointer",children:[e("input",{type:"checkbox",checked:i.includes(t.id),onChange:()=>Z(t.id),className:"mr-3"}),e("span",{children:t.name})]},t.id))})]}),e("button",{onClick:W,disabled:!c.valid||i.length===0,className:"w-full py-3 bg-purple-500 text-white rounded-lg font-bold hover:bg-purple-600 disabled:bg-gray-400 transition",children:"üöÄ Enviar Refor√ßo Comportamental"})]}),a("div",{className:"space-y-4",children:[e("h2",{className:"text-2xl font-bold",children:"üì¨ Refor√ßos Recebidos"}),q.length===0?e("div",{className:"bg-gray-50 rounded-lg p-6 text-center text-gray-500",children:"Nenhum refor√ßo recebido ainda."}):q.map(t=>a("div",{className:"bg-white rounded-lg shadow p-4 border-l-4 border-blue-500",children:[a("div",{className:"flex justify-between items-start mb-2",children:[a("div",{children:[a("p",{className:"font-bold text-blue-700",children:["De: ",t.sender.name]}),e("p",{className:"text-sm text-gray-500",children:new Date(t.created_at).toLocaleDateString("pt-BR")})]}),t.confirmed_at&&e("span",{className:"px-3 py-1 bg-green-100 text-green-800 text-xs font-medium rounded-full",children:"‚úÖ Confirmado"})]}),e("p",{className:"text-gray-700 mb-3",dangerouslySetInnerHTML:{__html:t.message.replace(/\*\*(.*?)\*\*/g,"<strong>$1</strong>")}}),!t.confirmed_at&&e("button",{onClick:()=>Y(t.id),className:"w-full py-2 bg-green-500 text-white rounded font-medium hover:bg-green-600",children:"‚úÖ Confirmar Refor√ßo (Dobrar Pontos)"})]},t.id)),e("h2",{className:"text-2xl font-bold mt-8",children:"üì§ Refor√ßos Enviados"}),M.length===0?e("div",{className:"bg-gray-50 rounded-lg p-6 text-center text-gray-500",children:"Voc√™ ainda n√£o enviou nenhum refor√ßo."}):M.map(t=>a("div",{className:"bg-white rounded-lg shadow p-4 border-l-4 border-purple-500",children:[a("div",{className:"flex justify-between items-start mb-2",children:[a("div",{children:[a("p",{className:"font-bold text-purple-700",children:["Para: ",t.receiver.name]}),e("p",{className:"text-sm text-gray-500",children:new Date(t.created_at).toLocaleDateString("pt-BR")})]}),t.confirmed_at&&e("span",{className:"px-3 py-1 bg-green-100 text-green-800 text-xs font-medium rounded-full",children:"‚úÖ Confirmado"})]}),e("p",{className:"text-gray-700 text-sm",dangerouslySetInnerHTML:{__html:t.message.replace(/\*\*(.*?)\*\*/g,"<strong>$1</strong>")}})]},t.id))]})]}),e("div",{className:"mt-8 text-center",children:e("button",{onClick:()=>p("levels"),className:"px-8 py-3 bg-gray-600 text-white rounded-lg font-bold hover:bg-gray-700",children:"‚Üê Voltar aos N√≠veis"})})]});return a(de,{user:A,header:a("h2",{className:"font-semibold text-xl text-gray-800 leading-tight",children:["üèÜ Desafio Final - ",u.title]}),children:[e(le,{title:`Desafio Final - ${u.title}`}),v==="levels"&&te(),v==="playing"&&ae(),v==="result"&&se(),v==="cooperation"&&re()]})}export{be as default};
