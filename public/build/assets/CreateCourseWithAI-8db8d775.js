import{r as o,j as r,a as e,S as M,F as m,A as E}from"./app-2033c2ba.js";import{A as O}from"./AuthenticatedLayout-e732cd47.js";import"./ApplicationLogo-fbe97745.js";import"./transition-997472bc.js";function U({auth:_}){var P,F,j,z;const[l,v]=o.useState(""),[n,N]=o.useState("text"),[u,y]=o.useState(null),[b,w]=o.useState(!1),[C,T]=o.useState(!1),[i,A]=o.useState(null),[h,q]=o.useState(null),[S,d]=o.useState(null),[c,x]=o.useState("input"),g=o.useRef(null),I=t=>{const a=t.target.files[0];if(a){if(a.size>2*1024*1024){d("Arquivo muito grande. Tamanho m√°ximo: 2MB");return}if(!["text/plain","application/pdf"].includes(a.type)){d("Tipo de arquivo n√£o suportado. Use apenas TXT ou PDF.");return}if(y(a),d(null),a.type==="text/plain"){const p=new FileReader;p.onload=L=>{v(L.target.result)},p.readAsText(a)}}},D=async()=>{if(!l.trim()){d("Por favor, insira ou fa√ßa upload de conte√∫do para an√°lise.");return}T(!0),d(null);try{const a=await(await fetch("/instructor/courses/ai/preview",{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]').getAttribute("content")},body:JSON.stringify({content:l,preview_only:!0})})).json();a.success?(A(a.preview),x("preview")):d(a.message||"Erro ao gerar preview")}catch{d("Erro de conex√£o. Tente novamente.")}finally{T(!1)}},k=async()=>{if(!l.trim()){d("Por favor, insira ou fa√ßa upload de conte√∫do para gerar o curso.");return}w(!0),d(null);try{const t=new FormData;t.append("content",l),t.append("content_type",n),u&&n==="file"&&t.append("file",u);const s=await(await fetch("/instructor/courses/ai/generate",{method:"POST",headers:{"X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]').getAttribute("content")},body:t})).json();s.success?(q(s),x("result"),setTimeout(()=>{E.visit(`/instructor/courses/${s.course.id}/edit`)},3e3)):d(s.message||"Erro ao gerar curso")}catch{d("Erro de conex√£o. Tente novamente.")}finally{w(!1)}},R=()=>{v(""),y(null),A(null),q(null),d(null),x("input"),g.current&&(g.current.value="")},f=({id:t,active:a,children:s})=>e("button",{onClick:()=>x(t),className:`px-6 py-3 font-medium rounded-lg transition-all duration-200 ${a?"bg-blue-600 text-white shadow-lg":"text-gray-600 hover:text-blue-600 hover:bg-blue-50"}`,children:s});return r(O,{user:_.user,header:e("div",{className:"flex items-center justify-between",children:r("div",{children:[e("h1",{className:"text-3xl font-bold bg-gradient-to-r from-purple-600 to-blue-600 bg-clip-text text-transparent",children:"ü§ñ Criar Curso com IA"}),e("p",{className:"text-gray-600 mt-1",children:"Transforme qualquer conte√∫do em um curso estruturado automaticamente"})]})}),children:[e(M,{title:"Criar Curso com IA"}),e("div",{className:"py-8 bg-gradient-to-br from-gray-50 to-white min-h-screen",children:r("div",{className:"max-w-4xl mx-auto sm:px-6 lg:px-8",children:[e("div",{className:"mb-8",children:r("div",{className:"flex space-x-2 bg-white p-2 rounded-lg shadow-sm border border-gray-200",children:[e(f,{id:"input",active:c==="input",children:"üìù Inserir Conte√∫do"}),e(f,{id:"preview",active:c==="preview",children:"üëÅÔ∏è Preview"}),e(f,{id:"result",active:c==="result",children:"‚úÖ Resultado"})]})}),S&&e("div",{className:"mb-6 p-4 bg-red-50 border border-red-200 rounded-lg",children:r("div",{className:"flex items-center",children:[e("span",{className:"text-red-600 text-lg mr-2",children:"‚ö†Ô∏è"}),e("p",{className:"text-red-800",children:S})]})}),c==="input"&&r("div",{className:"bg-white rounded-2xl shadow-lg border border-gray-100 overflow-hidden",children:[r("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 px-8 py-6 border-b border-gray-200",children:[r("h2",{className:"text-2xl font-bold text-gray-900 flex items-center",children:[e("span",{className:"mr-3",children:"üìö"}),"Conte√∫do do Curso"]}),e("p",{className:"text-gray-600 mt-1",children:"Cole seu texto ou fa√ßa upload de um arquivo PDF/TXT (m√°ximo 50KB)"})]}),r("div",{className:"p-8",children:[r("div",{className:"mb-6",children:[e("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Como voc√™ quer adicionar o conte√∫do?"}),r("div",{className:"flex space-x-4",children:[r("label",{className:"flex items-center",children:[e("input",{type:"radio",value:"text",checked:n==="text",onChange:t=>N(t.target.value),className:"mr-2 text-blue-600"}),e("span",{className:"text-gray-700",children:"üìù Digitar/Colar Texto"})]}),r("label",{className:"flex items-center",children:[e("input",{type:"radio",value:"file",checked:n==="file",onChange:t=>N(t.target.value),className:"mr-2 text-blue-600"}),e("span",{className:"text-gray-700",children:"üìÑ Upload de Arquivo"})]})]})]}),n==="text"&&r("div",{className:"mb-6",children:[e("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Conte√∫do do Curso"}),e("textarea",{value:l,onChange:t=>v(t.target.value),placeholder:"Cole aqui o conte√∫do que ser√° transformado em curso. Pode ser texto de livros, apostilas, artigos, etc...",className:"w-full h-64 p-4 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent resize-none",maxLength:"51200"}),r("div",{className:"mt-2 flex justify-between text-sm text-gray-500",children:[r("span",{children:[l.length," / 51,200 caracteres"]}),e("span",{className:`${l.length>51200?"text-red-500":""}`,children:l.length>51200?"Limite excedido!":"M√°ximo 50KB"})]})]}),n==="file"&&r("div",{className:"mb-6",children:[e("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Upload de Arquivo"}),r("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-6 hover:border-blue-400 transition-colors duration-200",children:[e("input",{ref:g,type:"file",onChange:I,accept:".txt,.pdf",className:"hidden"}),r("div",{className:"text-center",children:[e("div",{className:"text-4xl mb-4",children:"üìÑ"}),u?r("div",{children:[e("p",{className:"text-green-600 font-medium",children:u.name}),r("p",{className:"text-gray-500 text-sm mt-1",children:[(u.size/1024).toFixed(1)," KB"]}),e("button",{onClick:()=>g.current.click(),className:"mt-3 text-blue-600 hover:text-blue-800 text-sm",children:"Escolher outro arquivo"})]}):r("div",{children:[e("p",{className:"text-gray-600 mb-2",children:"Arraste um arquivo aqui ou clique para selecionar"}),e("button",{onClick:()=>g.current.click(),className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors duration-200",children:"Selecionar Arquivo"}),e("p",{className:"text-gray-500 text-sm mt-2",children:"Formatos: TXT, PDF ‚Ä¢ M√°ximo: 2MB"})]})]})]}),l&&n==="file"&&r("div",{className:"mt-4 p-4 bg-gray-50 rounded-lg border",children:[e("h4",{className:"font-medium text-gray-700 mb-2",children:"Preview do Conte√∫do:"}),r("div",{className:"text-sm text-gray-600 max-h-32 overflow-y-auto",children:[l.substring(0,500),l.length>500&&"..."]})]})]}),r("div",{className:"flex flex-col sm:flex-row gap-4",children:[e("button",{onClick:D,disabled:!l.trim()||C,className:"flex-1 flex items-center justify-center px-6 py-3 bg-gray-600 text-white rounded-lg font-medium hover:bg-gray-700 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200",children:C?r(m,{children:[e("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Gerando Preview..."]}):r(m,{children:[e("span",{className:"mr-2",children:"üëÅÔ∏è"}),"Ver Preview"]})}),e("button",{onClick:k,disabled:!l.trim()||b,className:"flex-1 flex items-center justify-center px-6 py-3 bg-blue-600 text-white rounded-lg font-medium hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200",children:b?r(m,{children:[e("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Gerando Curso..."]}):r(m,{children:[e("span",{className:"mr-2",children:"ü§ñ"}),"Gerar Curso com IA"]})})]}),r("div",{className:"mt-4 p-4 bg-blue-50 rounded-lg border border-blue-200",children:[e("h4",{className:"font-medium text-blue-800 mb-2",children:"üí° Dicas para melhores resultados:"}),r("ul",{className:"text-sm text-blue-700 space-y-1",children:[e("li",{children:"‚Ä¢ Use conte√∫do bem estruturado com t√≠tulos e subt√≠tulos"}),e("li",{children:"‚Ä¢ Inclua informa√ß√µes detalhadas sobre o assunto"}),e("li",{children:"‚Ä¢ Textos maiores geram cursos mais completos"}),e("li",{children:"‚Ä¢ A IA criar√° automaticamente m√≥dulos, quizzes e exerc√≠cios"})]})]})]})]}),c==="preview"&&i&&r("div",{className:"bg-white rounded-2xl shadow-lg border border-gray-100 overflow-hidden",children:[r("div",{className:"bg-gradient-to-r from-purple-50 to-pink-50 px-8 py-6 border-b border-gray-200",children:[r("h2",{className:"text-2xl font-bold text-gray-900 flex items-center",children:[e("span",{className:"mr-3",children:"üëÅÔ∏è"}),"Preview do Curso"]}),e("p",{className:"text-gray-600 mt-1",children:"Veja como ficar√° seu curso antes de criar"})]}),r("div",{className:"p-8",children:[r("div",{className:"mb-8",children:[e("h3",{className:"text-2xl font-bold text-gray-900 mb-2",children:i.title}),e("p",{className:"text-gray-600 mb-4",children:i.description}),r("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-6",children:[r("div",{className:"bg-blue-50 p-4 rounded-lg text-center",children:[e("div",{className:"text-2xl font-bold text-blue-600",children:((P=i.modules)==null?void 0:P.length)||0}),e("div",{className:"text-sm text-blue-800",children:"M√≥dulos"})]}),r("div",{className:"bg-green-50 p-4 rounded-lg text-center",children:[e("div",{className:"text-2xl font-bold text-green-600",children:i.activities_count||0}),e("div",{className:"text-sm text-green-800",children:"Atividades"})]}),r("div",{className:"bg-purple-50 p-4 rounded-lg text-center",children:[e("div",{className:"text-2xl font-bold text-purple-600",children:i.points_per_completion||0}),e("div",{className:"text-sm text-purple-800",children:"Pontos"})]}),r("div",{className:"bg-orange-50 p-4 rounded-lg text-center",children:[e("div",{className:"text-2xl font-bold text-orange-600",children:i.estimated_duration||"N/A"}),e("div",{className:"text-sm text-orange-800",children:"Dura√ß√£o"})]})]}),r("div",{className:"grid grid-cols-3 gap-4 text-center",children:[r("div",{className:"bg-gray-50 p-3 rounded-lg",children:[e("div",{className:"font-semibold text-blue-600",children:i.quiz_count||0}),e("div",{className:"text-xs text-gray-600",children:"Quizzes"})]}),r("div",{className:"bg-gray-50 p-3 rounded-lg",children:[e("div",{className:"font-semibold text-green-600",children:i.reading_count||0}),e("div",{className:"text-xs text-gray-600",children:"Leituras"})]}),r("div",{className:"bg-gray-50 p-3 rounded-lg",children:[e("div",{className:"font-semibold text-purple-600",children:i.assignment_count||0}),e("div",{className:"text-xs text-gray-600",children:"Exerc√≠cios"})]})]})]}),i.modules&&i.modules.length>0&&r("div",{className:"space-y-6",children:[e("h4",{className:"text-xl font-bold text-gray-900",children:"üìã M√≥dulos do Curso"}),i.modules.map((t,a)=>r("div",{className:"border border-gray-200 rounded-lg overflow-hidden",children:[r("div",{className:"bg-gray-50 px-6 py-4 border-b",children:[r("h5",{className:"text-lg font-semibold text-gray-900",children:["M√≥dulo ",t.order,": ",t.title]}),e("p",{className:"text-gray-600 text-sm mt-1",children:t.description})]}),e("div",{className:"p-6",children:t.activities&&t.activities.length>0&&e("div",{className:"space-y-3",children:t.activities.map((s,p)=>r("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[r("div",{className:"flex items-center",children:[e("span",{className:"mr-3",children:s.type==="quiz"?"‚ùì":s.type==="reading"?"üìñ":"‚úçÔ∏è"}),r("div",{children:[e("div",{className:"font-medium text-gray-900",children:s.title}),e("div",{className:"text-sm text-gray-600",children:s.description})]})]}),r("div",{className:"text-right",children:[r("div",{className:"text-sm font-semibold text-blue-600",children:[s.points," pts"]}),r("div",{className:"text-xs text-gray-500",children:[s.duration_minutes,"min"]})]})]},p))})})]},a))]}),r("div",{className:"flex flex-col sm:flex-row gap-4 mt-8",children:[e("button",{onClick:()=>x("input"),className:"flex-1 px-6 py-3 border border-gray-300 text-gray-700 rounded-lg font-medium hover:bg-gray-50 transition-all duration-200",children:"‚Üê Voltar ao Editor"}),e("button",{onClick:k,disabled:b,className:"flex-1 flex items-center justify-center px-6 py-3 bg-blue-600 text-white rounded-lg font-medium hover:bg-blue-700 disabled:opacity-50 transition-all duration-200",children:b?r(m,{children:[e("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Criando Curso..."]}):r(m,{children:[e("span",{className:"mr-2",children:"‚úÖ"}),"Confirmar e Criar Curso"]})})]})]})]}),c==="result"&&h&&r("div",{className:"bg-white rounded-2xl shadow-lg border border-gray-100 overflow-hidden",children:[r("div",{className:"bg-gradient-to-r from-green-50 to-emerald-50 px-8 py-6 border-b border-gray-200",children:[r("h2",{className:"text-2xl font-bold text-gray-900 flex items-center",children:[e("span",{className:"mr-3",children:"üéâ"}),"Curso Criado com Sucesso!"]}),e("p",{className:"text-gray-600 mt-1",children:"Seu curso foi gerado pela IA e est√° pronto para uso"})]}),r("div",{className:"p-8 text-center",children:[e("div",{className:"text-6xl mb-4",children:"üöÄ"}),e("h3",{className:"text-2xl font-bold text-gray-900 mb-2",children:(F=h.course)==null?void 0:F.title}),r("p",{className:"text-gray-600 mb-6",children:["Curso criado com ",((j=h.preview)==null?void 0:j.activities_count)||0," atividades e ",((z=h.preview)==null?void 0:z.badges_count)||0," badges"]}),r("div",{className:"bg-green-50 border border-green-200 rounded-lg p-6 mb-6",children:[e("h4",{className:"font-semibold text-green-800 mb-2",children:"‚úÖ O que foi criado:"}),r("ul",{className:"text-green-700 space-y-1",children:[e("li",{children:"‚Ä¢ Estrutura completa do curso com m√≥dulos organizados"}),e("li",{children:"‚Ä¢ Atividades variadas (quizzes, leituras, exerc√≠cios)"}),e("li",{children:"‚Ä¢ Sistema de pontua√ß√£o e badges"}),e("li",{children:"‚Ä¢ Conte√∫do baseado no material fornecido"})]})]}),e("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-6 mb-6",children:r("p",{className:"text-blue-800",children:[e("strong",{children:"Pr√≥ximos passos:"})," Voc√™ ser√° redirecionado para o editor do curso onde poder√° fazer ajustes finais antes de publicar."]})}),r("div",{className:"flex flex-col sm:flex-row gap-4",children:[e("button",{onClick:R,className:"flex-1 px-6 py-3 border border-gray-300 text-gray-700 rounded-lg font-medium hover:bg-gray-50 transition-all duration-200",children:"üîÑ Criar Outro Curso"}),e("button",{onClick:()=>E.visit(`/instructor/courses/${h.course.id}/edit`),className:"flex-1 px-6 py-3 bg-blue-600 text-white rounded-lg font-medium hover:bg-blue-700 transition-all duration-200",children:"‚úèÔ∏è Editar Curso Agora"})]}),e("div",{className:"mt-4 text-sm text-gray-500",children:"Redirecionamento autom√°tico em 3 segundos..."})]})]})]})})]})}export{U as default};
