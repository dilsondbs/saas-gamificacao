import{r as l,G as z,j as t,a as e,S as L,A as k,F}from"./app-2033c2ba.js";import{A as X}from"./AuthenticatedLayout-e732cd47.js";import{C as y}from"./CloudArrowUpIcon-d8ff5991.js";import{E as _}from"./ExclamationTriangleIcon-0a42c3b9.js";import{D as d}from"./DocumentIcon-b0bd6cb4.js";import"./ApplicationLogo-fbe97745.js";import"./transition-997472bc.js";function B({title:c,titleId:u,...n},g){return l.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:g,"aria-labelledby":u},n),c?l.createElement("title",{id:u},c):null,l.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18 18 6M6 6l12 12"}))}const J=l.forwardRef(B),R=J;function re({auth:c,courses:u,selectedCourse:n}){const[g,f]=l.useState(!1),[w,m]=l.useState(0),[b,P]=l.useState(!1),[p,D]=l.useState(null),[v,N]=l.useState([]),h=l.useRef(null),{data:o,setData:x,post:C,processing:E,errors:i,reset:V}=z({course_id:(n==null?void 0:n.id)||"",title:"",file:null}),I=["pdf","doc","docx","ppt","pptx","jpg","jpeg","png"],S=10*1024*1024,q=r=>{const a=[];if(!r)return a.push("Por favor selecione um arquivo"),a;r.size>S&&a.push("O arquivo deve ter no máximo 10MB");const s=r.name.split(".").pop().toLowerCase();return I.includes(s)||a.push("Formato não suportado. Use: PDF, DOC, DOCX, PPT, PPTX, JPG, JPEG, PNG"),a},j=r=>{const a=q(r);N(a),a.length===0&&(x("file",r),D({name:r.name,size:(r.size/1024/1024).toFixed(2),type:r.type}))},A=r=>{r.preventDefault(),f(!0)},M=r=>{r.preventDefault(),f(!1)},O=r=>{r.preventDefault(),f(!1);const a=r.dataTransfer.files;a.length>0&&j(a[0])},T=r=>{const a=r.target.files[0];a&&j(a)},$=()=>{x("file",null),D(null),N([]),h.current&&(h.current.value="")},G=r=>{if(r.preventDefault(),!o.file){N(["Por favor selecione um arquivo"]);return}P(!0),m(0);const a=setInterval(()=>{m(s=>s>=90?(clearInterval(a),90):s+10)},200);C(route("instructor.materials.store"),{preserveScroll:!0,onSuccess:()=>{m(100),setTimeout(()=>{k.visit(route("instructor.courses.show",o.course_id))},1e3)},onError:()=>{P(!1),m(0),clearInterval(a)},onFinish:()=>{clearInterval(a)}})},U=r=>{const a=r==null?void 0:r.split(".").pop().toLowerCase(),s="w-8 h-8";return["pdf"].includes(a)?e(d,{className:`${s} text-red-500`}):["doc","docx"].includes(a)?e(d,{className:`${s} text-blue-500`}):["ppt","pptx"].includes(a)?e(d,{className:`${s} text-orange-500`}):["jpg","jpeg","png"].includes(a)?e(d,{className:`${s} text-green-500`}):e(d,{className:`${s} text-gray-500`})};return t(X,{user:c.user,header:e("div",{className:"flex justify-between items-center",children:t("div",{children:[e("h2",{className:"text-xl font-semibold text-gray-800",children:"Adicionar Material"}),e("p",{className:"text-sm text-gray-600 mt-1",children:"Faça upload de materiais de apoio para seus cursos"})]})}),children:[e(L,{title:"Adicionar Material"}),e("div",{className:"py-12",children:e("div",{className:"max-w-4xl mx-auto sm:px-6 lg:px-8",children:e("div",{className:"bg-white overflow-hidden shadow-xl sm:rounded-2xl",children:t("div",{className:"relative bg-gradient-to-br from-blue-50 via-indigo-50 to-purple-50 px-8 py-12",children:[e("div",{className:"absolute inset-0 bg-white/70 backdrop-blur-sm"}),t("div",{className:"relative",children:[t("div",{className:"flex items-center space-x-3 mb-6",children:[e("div",{className:"w-12 h-12 bg-gradient-to-br from-blue-500 to-indigo-600 rounded-xl flex items-center justify-center",children:e(y,{className:"w-6 h-6 text-white"})}),t("div",{children:[e("h3",{className:"text-2xl font-bold text-gray-900",children:"Upload de Material"}),e("p",{className:"text-gray-600",children:"Adicione recursos para enriquecer suas aulas"})]})]}),t("form",{onSubmit:G,className:"space-y-8",children:[t("div",{className:"space-y-2",children:[e("label",{className:"block text-sm font-semibold text-gray-700",children:"Curso"}),t("select",{value:o.course_id,onChange:r=>x("course_id",r.target.value),className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 bg-white/80 backdrop-blur-sm",required:!0,children:[e("option",{value:"",children:"Selecione um curso"}),u.map(r=>e("option",{value:r.id,children:r.title},r.id))]}),i.course_id&&e("p",{className:"text-red-500 text-sm",children:i.course_id})]}),t("div",{className:"space-y-2",children:[e("label",{className:"block text-sm font-semibold text-gray-700",children:"Título do Material"}),e("input",{type:"text",value:o.title,onChange:r=>x("title",r.target.value),className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 bg-white/80 backdrop-blur-sm",placeholder:"Ex: Apostila Módulo 1, Slides Introdutórios...",required:!0}),i.title&&e("p",{className:"text-red-500 text-sm",children:i.title})]}),t("div",{className:"space-y-2",children:[e("label",{className:"block text-sm font-semibold text-gray-700",children:"Arquivo"}),p?t("div",{className:"bg-white/80 backdrop-blur-sm border border-gray-200 rounded-xl p-6",children:[t("div",{className:"flex items-center justify-between",children:[t("div",{className:"flex items-center space-x-4",children:[U(p.name),t("div",{children:[e("h4",{className:"font-medium text-gray-900",children:p.name}),t("p",{className:"text-sm text-gray-500",children:[p.size," MB"]})]})]}),e("button",{type:"button",onClick:$,className:"p-2 text-gray-400 hover:text-red-500 hover:bg-red-50 rounded-lg transition-all duration-200",children:e(R,{className:"w-5 h-5"})})]}),b&&t("div",{className:"mt-4",children:[t("div",{className:"flex items-center justify-between text-sm mb-2",children:[e("span",{className:"text-gray-600",children:"Enviando..."}),t("span",{className:"text-gray-600",children:[w,"%"]})]}),e("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e("div",{className:"bg-gradient-to-r from-blue-500 to-indigo-600 h-2 rounded-full transition-all duration-300",style:{width:`${w}%`}})})]})]}):t("div",{className:`relative border-2 border-dashed rounded-xl p-12 text-center transition-all duration-300 cursor-pointer ${g?"border-blue-500 bg-blue-50/80 scale-102":"border-gray-300 bg-white/50 hover:bg-blue-50/50 hover:border-blue-400"}`,onDragOver:A,onDragLeave:M,onDrop:O,onClick:()=>{var r;return(r=h.current)==null?void 0:r.click()},children:[e("input",{ref:h,type:"file",onChange:T,className:"hidden",accept:".pdf,.doc,.docx,.ppt,.pptx,.jpg,.jpeg,.png"}),t("div",{className:"space-y-4",children:[e("div",{className:"mx-auto w-16 h-16 bg-gradient-to-br from-blue-500 to-indigo-600 rounded-full flex items-center justify-center",children:e(y,{className:"w-8 h-8 text-white"})}),t("div",{children:[e("h4",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Arraste e solte seu arquivo aqui"}),e("p",{className:"text-gray-600 mb-4",children:"ou clique para selecionar"}),e("div",{className:"inline-flex items-center px-4 py-2 bg-gradient-to-r from-blue-500 to-indigo-600 text-white rounded-lg font-medium hover:from-blue-600 hover:to-indigo-700 transition-all duration-200",children:"Escolher Arquivo"})]}),t("div",{className:"text-sm text-gray-500",children:[e("p",{children:"Formatos aceitos: PDF, DOC, DOCX, PPT, PPTX, JPG, JPEG, PNG"}),e("p",{children:"Tamanho máximo: 10MB"})]})]})]}),v.length>0&&e("div",{className:"bg-red-50 border border-red-200 rounded-xl p-4",children:t("div",{className:"flex items-start space-x-3",children:[e(_,{className:"w-5 h-5 text-red-500 mt-0.5"}),t("div",{children:[e("h4",{className:"font-medium text-red-800 mb-1",children:"Erro no arquivo"}),e("ul",{className:"text-sm text-red-600 space-y-1",children:v.map((r,a)=>t("li",{children:["• ",r]},a))})]})]})}),i.file&&e("p",{className:"text-red-500 text-sm",children:i.file})]}),t("div",{className:"flex items-center justify-end space-x-4 pt-6",children:[e("button",{type:"button",onClick:()=>k.visit(route("instructor.courses.index")),className:"px-6 py-3 text-gray-600 hover:text-gray-800 font-medium transition-colors duration-200",children:"Cancelar"}),e("button",{type:"submit",disabled:E||b||!o.file||v.length>0,className:"inline-flex items-center px-8 py-3 bg-gradient-to-r from-blue-500 to-indigo-600 text-white font-semibold rounded-xl hover:from-blue-600 hover:to-indigo-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200 shadow-lg hover:shadow-xl transform hover:scale-105",children:b?t(F,{children:[e("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white mr-2"}),"Enviando..."]}):t(F,{children:[e(y,{className:"w-5 h-5 mr-2"}),"Fazer Upload"]})})]})]})]})]})})})})]})}export{re as default};
