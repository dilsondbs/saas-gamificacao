import{r as o,j as a,a as e,S as D,A as x}from"./app-2033c2ba.js";import{A as I}from"./AuthenticatedLayout-e732cd47.js";import"./ApplicationLogo-fbe97745.js";import"./transition-997472bc.js";function E({auth:v,logs:d,stats:l,statsByAction:b,statsByTenant:k,dailyUsage:U,tenants:_,actions:C,filters:n}){const[h,p]=o.useState(n.tenant_id||""),[g,u]=o.useState(n.action||""),[y,N]=o.useState(n.start_date||""),[w,f]=o.useState(n.end_date||""),T=()=>{x.get(route("central.ai-usage"),{tenant_id:h,action:g,start_date:y,end_date:w},{preserveState:!0})},A=()=>{p(""),u(""),N(""),f(""),x.get(route("central.ai-usage"))},c=t=>new Intl.NumberFormat("pt-BR",{style:"currency",currency:"USD"}).format(t||0),r=t=>new Intl.NumberFormat("pt-BR").format(t||0),S=t=>new Date(t).toLocaleString("pt-BR"),m=t=>({generate_course:"Gerar Curso",generate_activities:"Gerar Atividades",generate_badges:"Gerar Badges",generate_canvas:"Gerar Canvas"})[t]||t;return a(I,{user:v.user,isCentral:!0,header:e("h2",{className:"font-semibold text-xl text-gray-800 leading-tight",children:"Uso da API Gemini"}),children:[e(D,{title:"Uso da API Gemini"}),e("div",{className:"py-12",children:a("div",{className:"max-w-7xl mx-auto sm:px-6 lg:px-8 space-y-6",children:[a("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4",children:[e("div",{className:"bg-blue-50 overflow-hidden shadow rounded-lg",children:a("div",{className:"p-5",children:[e("div",{className:"text-sm font-medium text-gray-500 truncate",children:"Total de Chamadas"}),e("div",{className:"mt-1 text-2xl font-semibold text-gray-900",children:r(l.total_calls)})]})}),e("div",{className:"bg-green-50 overflow-hidden shadow rounded-lg",children:a("div",{className:"p-5",children:[e("div",{className:"text-sm font-medium text-gray-500 truncate",children:"Custo Total"}),e("div",{className:"mt-1 text-2xl font-semibold text-gray-900",children:c(l.total_cost)})]})}),e("div",{className:"bg-purple-50 overflow-hidden shadow rounded-lg",children:a("div",{className:"p-5",children:[e("div",{className:"text-sm font-medium text-gray-500 truncate",children:"Total de Tokens"}),e("div",{className:"mt-1 text-2xl font-semibold text-gray-900",children:r(l.total_tokens)})]})}),e("div",{className:"bg-yellow-50 overflow-hidden shadow rounded-lg",children:a("div",{className:"p-5",children:[e("div",{className:"text-sm font-medium text-gray-500 truncate",children:"Tokens de Entrada"}),e("div",{className:"mt-1 text-2xl font-semibold text-gray-900",children:r(l.total_input_tokens)})]})}),e("div",{className:"bg-orange-50 overflow-hidden shadow rounded-lg",children:a("div",{className:"p-5",children:[e("div",{className:"text-sm font-medium text-gray-500 truncate",children:"Tokens de Saída"}),e("div",{className:"mt-1 text-2xl font-semibold text-gray-900",children:r(l.total_output_tokens)})]})})]}),e("div",{className:"bg-white overflow-hidden shadow-sm sm:rounded-lg",children:a("div",{className:"p-6",children:[e("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Filtros"}),a("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[a("div",{children:[e("label",{className:"block text-sm font-medium text-gray-700",children:"Cliente"}),a("select",{value:h,onChange:t=>p(t.target.value),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500",children:[e("option",{value:"",children:"Todos"}),_.map(t=>e("option",{value:t.id,children:t.name},t.id))]})]}),a("div",{children:[e("label",{className:"block text-sm font-medium text-gray-700",children:"Ação"}),a("select",{value:g,onChange:t=>u(t.target.value),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500",children:[e("option",{value:"",children:"Todas"}),C.map(t=>e("option",{value:t,children:m(t)},t))]})]}),a("div",{children:[e("label",{className:"block text-sm font-medium text-gray-700",children:"Data Inicial"}),e("input",{type:"date",value:y,onChange:t=>N(t.target.value),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"})]}),a("div",{children:[e("label",{className:"block text-sm font-medium text-gray-700",children:"Data Final"}),e("input",{type:"date",value:w,onChange:t=>f(t.target.value),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"})]})]}),a("div",{className:"mt-4 flex gap-2",children:[e("button",{onClick:T,className:"bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700",children:"Aplicar Filtros"}),e("button",{onClick:A,className:"bg-gray-300 text-gray-700 px-4 py-2 rounded-md hover:bg-gray-400",children:"Limpar"})]})]})}),e("div",{className:"bg-white overflow-hidden shadow-sm sm:rounded-lg",children:a("div",{className:"p-6",children:[e("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Uso por Tipo de Ação"}),e("div",{className:"overflow-x-auto",children:a("table",{className:"min-w-full divide-y divide-gray-200",children:[e("thead",{className:"bg-gray-50",children:a("tr",{children:[e("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Ação"}),e("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Chamadas"}),e("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Tokens Entrada"}),e("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Tokens Saída"}),e("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Custo Total"})]})}),e("tbody",{className:"bg-white divide-y divide-gray-200",children:b.map((t,s)=>a("tr",{children:[e("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:m(t.action)}),e("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:r(t.calls)}),e("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:r(t.input_tokens)}),e("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:r(t.output_tokens)}),e("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:c(t.total_cost)})]},s))})]})})]})}),e("div",{className:"bg-white overflow-hidden shadow-sm sm:rounded-lg",children:a("div",{className:"p-6",children:[e("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Top 10 Clientes por Uso"}),e("div",{className:"overflow-x-auto",children:a("table",{className:"min-w-full divide-y divide-gray-200",children:[e("thead",{className:"bg-gray-50",children:a("tr",{children:[e("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Cliente"}),e("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Chamadas"}),e("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Total de Tokens"}),e("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Custo Total"})]})}),e("tbody",{className:"bg-white divide-y divide-gray-200",children:k.map((t,s)=>{var i;return a("tr",{children:[e("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:((i=t.tenant)==null?void 0:i.name)||"N/A"}),e("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:r(t.calls)}),e("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:r(t.total_tokens)}),e("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:c(t.total_cost)})]},s)})})]})})]})}),e("div",{className:"bg-white overflow-hidden shadow-sm sm:rounded-lg",children:a("div",{className:"p-6",children:[e("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Histórico de Chamadas"}),e("div",{className:"overflow-x-auto",children:a("table",{className:"min-w-full divide-y divide-gray-200",children:[e("thead",{className:"bg-gray-50",children:a("tr",{children:[e("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Data/Hora"}),e("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Cliente"}),e("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Usuário"}),e("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Ação"}),e("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Tokens In"}),e("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Tokens Out"}),e("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Custo"})]})}),e("tbody",{className:"bg-white divide-y divide-gray-200",children:d.data.map(t=>{var s,i;return a("tr",{children:[e("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:S(t.created_at)}),e("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:((s=t.tenant)==null?void 0:s.name)||"N/A"}),e("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:((i=t.user)==null?void 0:i.name)||"Sistema"}),e("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:m(t.action)}),e("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:r(t.input_tokens)}),e("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:r(t.output_tokens)}),e("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:c(t.cost_usd)})]},t.id)})})]})}),d.links&&d.links.length>3&&a("div",{className:"mt-4 flex justify-between items-center",children:[a("div",{className:"text-sm text-gray-700",children:["Mostrando ",d.from," a ",d.to," de ",d.total," registros"]}),e("div",{className:"flex gap-2",children:d.links.map((t,s)=>e("button",{onClick:()=>t.url&&x.get(t.url),disabled:!t.url,className:`px-3 py-1 rounded ${t.active?"bg-blue-600 text-white":t.url?"bg-gray-200 hover:bg-gray-300":"bg-gray-100 text-gray-400 cursor-not-allowed"}`,dangerouslySetInnerHTML:{__html:t.label}},s))})]})]})})]})})]})}export{E as default};
