import{r as m,j as l,F as y,a as e,S as N,x as u,A as w}from"./app-2033c2ba.js";function S({step1Data:p,suggestedSlug:h}){const[g,b]=m.useState(!1),[o,c]=m.useState({}),[t,x]=m.useState({tenant_name:p.company_name||"",tenant_slug:h||"",tenant_description:"",custom_domain:"",primary_color:"#3B82F6",logo_url:""}),s=(a,r)=>{x(n=>({...n,[a]:r})),o[a]&&c(n=>({...n,[a]:null}))},f=async a=>{if(!(!a||a.length<3))try{const n=await(await fetch(`/central/api/check-slug?slug=${encodeURIComponent(a)}`)).json();n.available?c(d=>({...d,tenant_slug:null})):c(d=>({...d,tenant_slug:n.message}))}catch(r){console.error("Error checking slug:",r)}},v=a=>{a.preventDefault(),console.log("🚀 Step2 form submission started",t),b(!0),c({}),w.post("/signup/step2",t,{onBefore:r=>(console.log("📤 About to send request to:",r.url),console.log("📝 Form data being sent:",t),!0),onStart:r=>{console.log("🔄 Request started")},onProgress:r=>{console.log("⏳ Progress:",r)},onSuccess:r=>{console.log("✅ Step2 submitted successfully, received page:",r.component)},onError:r=>{console.error("❌ Step2 validation errors:",r),c(r)},onFinish:()=>{console.log("🏁 Request finished"),b(!1)},preserveScroll:!1,preserveState:!1})},i=[{number:1,title:"Informações da Empresa",completed:!0},{number:2,title:"Configuração do Tenant",active:!0},{number:3,title:"Pagamento",disabled:!0},{number:4,title:"Confirmação",disabled:!0}];return l(y,{children:[e(N,{title:"Configuração do Tenant - Etapa 2"}),l("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-indigo-50 to-purple-50",children:[e("nav",{className:"bg-white/95 backdrop-blur-sm border-b border-gray-200",children:e("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:l("div",{className:"flex justify-between h-16 items-center",children:[l(u,{href:"/",className:"flex items-center space-x-2",children:[e("div",{className:"w-8 h-8 bg-gradient-to-r from-blue-600 to-purple-600 rounded-lg flex items-center justify-center",children:e("span",{className:"text-white font-bold text-sm",children:"SG"})}),e("span",{className:"font-bold text-xl text-gray-900",children:"SaaS Gamificação"})]}),e(u,{href:"/login",className:"text-gray-600 hover:text-gray-900 transition-colors",children:"Já tem uma conta? Faça login"})]})})}),l("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:[e("div",{className:"mb-8",children:e("nav",{"aria-label":"Progress",children:e("ol",{className:"flex items-center",children:i.map((a,r)=>l("li",{className:`${r!==i.length-1?"pr-8 sm:pr-20":""} relative`,children:[l("div",{className:"flex items-center",children:[e("div",{className:`flex items-center justify-center w-10 h-10 rounded-full border-2 ${a.completed||a.active?"bg-blue-600 border-blue-600 text-white":"border-gray-300 bg-white text-gray-500"}`,children:a.completed?e("svg",{className:"w-6 h-6",fill:"currentColor",viewBox:"0 0 20 20",children:e("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})}):e("span",{className:"text-sm font-medium",children:a.number})}),e("div",{className:"ml-4 hidden sm:block",children:e("div",{className:`text-sm font-medium ${a.completed||a.active?"text-blue-600":"text-gray-500"}`,children:a.title})})]}),r!==i.length-1&&e("div",{className:"hidden sm:block absolute top-5 left-10 w-full h-0.5",style:{backgroundColor:a.completed?"#2563eb":"#e5e7eb"}})]},a.number))})})}),e("div",{className:"bg-white rounded-2xl shadow-xl overflow-hidden",children:l("div",{className:"p-8",children:[l("div",{className:"mb-8",children:[e("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Configure seu Tenant"}),e("p",{className:"text-gray-600",children:"Personalize sua plataforma e defina como ela será acessada."})]}),o.general&&e("div",{className:"mb-6 bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg",children:o.general}),l("form",{onSubmit:v,className:"space-y-6",children:[l("div",{className:"grid md:grid-cols-2 gap-6",children:[l("div",{className:"md:col-span-2",children:[e("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Nome da Plataforma *"}),e("input",{type:"text",value:t.tenant_name,onChange:a=>s("tenant_name",a.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Ex: Portal de Ensino da Escola Inovação",required:!0}),o.tenant_name&&e("p",{className:"mt-1 text-sm text-red-600",children:o.tenant_name})]}),l("div",{className:"md:col-span-2",children:[e("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Slug da URL *"}),l("div",{className:"flex",children:[e("input",{type:"text",value:t.tenant_slug,onChange:a=>{const r=a.target.value.toLowerCase().replace(/[^a-z0-9\-]/g,"");s("tenant_slug",r),f(r)},className:"flex-1 px-4 py-3 border border-gray-300 rounded-l-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"escola-inovacao",required:!0}),e("div",{className:"px-4 py-3 bg-gray-100 border border-l-0 border-gray-300 rounded-r-lg text-gray-600 text-sm",children:".saas-gamificacao.local"})]}),l("p",{className:"mt-1 text-xs text-gray-500",children:["Sua plataforma será acessível em: http://",t.tenant_slug||"seu-slug",".saas-gamificacao.local"]}),o.tenant_slug&&e("p",{className:"mt-1 text-sm text-red-600",children:o.tenant_slug})]}),l("div",{className:"md:col-span-2",children:[e("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Descrição da Plataforma"}),e("textarea",{value:t.tenant_description,onChange:a=>s("tenant_description",a.target.value),rows:3,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Descreva brevemente sua plataforma educacional..."})]}),l("div",{children:[e("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Cor Principal"}),l("div",{className:"flex items-center space-x-3",children:[e("input",{type:"color",value:t.primary_color,onChange:a=>s("primary_color",a.target.value),className:"w-12 h-12 border border-gray-300 rounded-lg cursor-pointer"}),e("input",{type:"text",value:t.primary_color,onChange:a=>s("primary_color",a.target.value),className:"flex-1 px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"#3B82F6"})]})]}),l("div",{children:[e("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Logo URL (opcional)"}),e("input",{type:"url",value:t.logo_url,onChange:a=>s("logo_url",a.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"https://exemplo.com/logo.png"})]})]}),l("div",{className:"flex justify-between pt-6 border-t border-gray-200",children:[e(u,{href:"/signup",className:"px-6 py-3 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 transition-colors",children:"Voltar"}),e("button",{type:"submit",disabled:g,className:"px-8 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:g?"Processando...":"Continuar"})]})]})]})})]})]})]})}export{S as default};
