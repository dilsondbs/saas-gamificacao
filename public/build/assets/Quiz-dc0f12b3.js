import{r as m,G as te,j as t,a as e,S as v,F as z}from"./app-8c0852e1.js";import{A as w}from"./AuthenticatedLayout-59e9d229.js";import"./ApplicationLogo-b365625c.js";import"./transition-f64bd92e.js";function de({auth:D,activity:u,course:ae,userActivity:F,hasCompleted:E,quiz_result:o}){var A;const f=D.user,[l,N]=m.useState(0),[c,y]=m.useState(!1),[x,T]=m.useState(null),[S,V]=m.useState(0),[C,$]=m.useState(0),[O,R]=m.useState(0),[G,Y]=m.useState(new Set),[H,Q]=m.useState([]),[k,M]=m.useState(!1),[L,j]=m.useState(!1),i=((A=u.content)==null?void 0:A.questions)||[],{data:g,setData:W,post:B,processing:P,errors:re}=te({answers:{}}),J=()=>{navigator.vibrate&&navigator.vibrate([100,50,100])},K=()=>{navigator.vibrate&&navigator.vibrate([200])},U=()=>{const a=[];for(let r=0;r<12;r++)a.push({id:Math.random(),x:Math.random()*window.innerWidth,y:Math.random()*window.innerHeight,delay:Math.random()*.5});Q(a),setTimeout(()=>Q([]),2e3)},X=(a,r)=>{if(c)return;const d=i[a],s=r===d.correct;if(W("answers",{...g.answers,[a]:r}),Y(n=>new Set([...n,a])),s&&!G.has(a)){const n=Math.round(u.points_value/i.length);V(h=>h+n),$(h=>h+1),R(h=>Math.max(h,C+1)),J(),U()}else s||($(0),K(),M(!0),setTimeout(()=>M(!1),600));T(s),y(!0),setTimeout(()=>{y(!1),a<i.length-1&&N(a+1)},2500)},Z=()=>{c||l<i.length-1&&N(l+1)},_=()=>{c||l>0&&N(l-1)},I=()=>{c||(j(!0),setTimeout(()=>j(!1),3e3),setTimeout(()=>{B(route("student.quiz.submit",u.id))},1e3))},q=()=>i.every((a,r)=>g.answers.hasOwnProperty(r));if(E&&o)return t(w,{user:f,header:e("h2",{className:"font-semibold text-xl text-gray-800 leading-tight",children:"🎯 Quiz Completado - Gabarito"}),children:[e(v,{title:`Quiz: ${u.title}`}),e("div",{className:"py-8",children:t("div",{className:"max-w-4xl mx-auto sm:px-6 lg:px-8 space-y-8",children:[e("div",{className:"bg-white rounded-xl shadow-lg overflow-hidden",children:t("div",{className:`p-8 text-center ${o.percentage>=70?"bg-green-50":"bg-orange-50"}`,children:[e("div",{className:`text-6xl mb-4 ${o.percentage>=70?"text-green-500":"text-orange-500"}`,children:o.percentage>=70?"🎉":"📝"}),e("h1",{className:"text-3xl font-bold mb-4 text-gray-900",children:o.percentage>=70?"Parabéns!":"Quiz Completado!"}),t("div",{className:"text-lg text-gray-700 mb-6",children:["Você acertou ",e("span",{className:"font-bold text-2xl text-green-600",children:o.score})," de"," ",e("span",{className:"font-bold",children:o.total})," questões"]}),e("div",{className:"flex justify-center mb-6",children:t("div",{className:`text-4xl font-bold ${o.percentage>=70?"text-green-600":"text-orange-600"}`,children:[Math.round(o.percentage),"%"]})}),o.points_earned>0?e("div",{className:"bg-yellow-100 border border-yellow-300 rounded-lg p-4 mb-6",children:t("div",{className:"flex items-center justify-center",children:[e("span",{className:"text-2xl mr-2",children:"🏆"}),t("span",{className:"text-lg font-medium text-yellow-800",children:["Você ganhou ",o.points_earned," pontos!"]})]})}):e("div",{className:"bg-blue-100 border border-blue-300 rounded-lg p-4 mb-6",children:t("div",{className:"text-blue-800",children:[e("span",{className:"font-medium",children:"💡 Dica:"})," Você precisa acertar pelo menos 70% das questões para ganhar pontos!"]})})]})}),e("div",{className:"bg-white rounded-xl shadow-lg overflow-hidden",children:t("div",{className:"p-6",children:[t("h3",{className:"text-xl font-bold text-gray-900 mb-6 flex items-center",children:[e("span",{className:"text-2xl mr-2",children:"📋"}),"Gabarito Detalhado"]}),e("div",{className:"space-y-6",children:i.map((a,r)=>{var n,h;const d=(h=(n=F.metadata)==null?void 0:n.answers)==null?void 0:h[r],s=d===a.correct;return e("div",{className:`border rounded-lg p-4 ${s?"border-green-200 bg-green-50":"border-red-200 bg-red-50"}`,children:t("div",{className:"flex items-start mb-3",children:[e("div",{className:`flex-shrink-0 w-8 h-8 rounded-full flex items-center justify-center text-white font-bold mr-3 ${s?"bg-green-500":"bg-red-500"}`,children:s?"✓":"✗"}),t("div",{className:"flex-1",children:[t("h4",{className:"font-medium text-gray-900 mb-2",children:["Questão ",r+1,": ",a.question]}),e("div",{className:"space-y-2 mb-3",children:a.options.map((ee,b)=>e("div",{className:`p-2 rounded ${b===a.correct?"bg-green-100 border border-green-300":b===d&&!s?"bg-red-100 border border-red-300":"bg-gray-50"}`,children:t("div",{className:"flex items-center",children:[t("span",{className:"font-medium mr-2",children:[String.fromCharCode(65+b),"."]}),e("span",{children:ee}),b===a.correct&&e("span",{className:"ml-2 text-green-600 font-medium",children:"✓ Resposta correta"}),b===d&&!s&&e("span",{className:"ml-2 text-red-600 font-medium",children:"✗ Sua resposta"})]})},b))}),a.explanation&&e("div",{className:"bg-blue-50 border border-blue-200 rounded p-3",children:t("div",{className:"flex items-start",children:[e("span",{className:"text-blue-500 mr-2",children:"💡"}),t("div",{children:[e("span",{className:"font-medium text-blue-900",children:"Explicação:"}),e("p",{className:"text-blue-800 text-sm mt-1",children:a.explanation})]})]})})]})]})},r)})})]})}),t("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[e("button",{onClick:()=>window.location.href=route("student.courses"),className:"px-8 py-3 bg-blue-500 text-white rounded-lg font-medium hover:bg-blue-600 transition-colors duration-200",children:"📚 Voltar aos Cursos"}),e("button",{onClick:()=>window.location.href=route("student.dashboard"),className:"px-8 py-3 bg-green-500 text-white rounded-lg font-medium hover:bg-green-600 transition-colors duration-200",children:"🎯 Ver Dashboard Atualizado"})]})]})})]});if(i.length===0)return t(w,{user:f,header:e("h2",{className:"font-semibold text-xl text-gray-800 leading-tight",children:"Quiz"}),children:[e(v,{title:`Quiz: ${u.title}`}),e("div",{className:"py-8",children:e("div",{className:"max-w-4xl mx-auto sm:px-6 lg:px-8 text-center",children:t("div",{className:"bg-white rounded-xl shadow-lg p-8",children:[e("div",{className:"text-6xl mb-4",children:"❓"}),e("h2",{className:"text-2xl font-bold mb-4",children:"Nenhuma questão disponível"}),e("p",{className:"text-gray-600",children:"Este quiz ainda não possui questões configuradas."})]})})})]});const p=i[l];return t(w,{user:f,header:t("div",{className:"flex items-center justify-between",children:[t("h2",{className:"font-semibold text-xl text-gray-800 leading-tight",children:["🎯 ",u.title]}),t("div",{className:"flex items-center space-x-4 text-sm",children:[t("div",{className:"bg-blue-100 text-blue-800 px-3 py-1 rounded-full font-medium",children:["🎯 ",S," pts"]}),t("div",{className:"text-gray-600",children:[l+1,"/",i.length]})]})]}),children:[e(v,{title:`Quiz: ${u.title}`}),e("div",{className:"fixed inset-0 pointer-events-none z-50",children:H.map(a=>e("div",{className:"absolute text-2xl animate-bounce",style:{left:a.x,top:a.y,animationDelay:`${a.delay}s`,animationDuration:"1s"},children:"⭐"},a.id))}),L&&e("div",{className:"fixed inset-0 pointer-events-none z-50",children:[...Array(50)].map((a,r)=>e("div",{className:"absolute animate-ping",style:{left:`${Math.random()*100}%`,top:`${Math.random()*100}%`,animationDelay:`${Math.random()*2}s`,fontSize:"24px"},children:["🎉","🎊","⭐","💫","✨"][Math.floor(Math.random()*5)]},r))}),e("div",{className:`py-8 transition-all duration-300 ${k?"animate-pulse":""}`,children:t("div",{className:"max-w-4xl mx-auto sm:px-6 lg:px-8",children:[t("div",{className:"grid grid-cols-3 gap-4 mb-6",children:[t("div",{className:"bg-gradient-to-r from-yellow-400 to-orange-500 text-white rounded-xl p-4 text-center",children:[e("div",{className:"text-2xl font-bold animate-pulse",children:S}),e("div",{className:"text-sm opacity-90",children:"Pontos"})]}),t("div",{className:"bg-gradient-to-r from-green-400 to-blue-500 text-white rounded-xl p-4 text-center",children:[e("div",{className:"text-2xl font-bold",children:C}),e("div",{className:"text-sm opacity-90",children:"Sequência"})]}),t("div",{className:"bg-gradient-to-r from-purple-500 to-pink-500 text-white rounded-xl p-4 text-center",children:[e("div",{className:"text-2xl font-bold",children:O}),e("div",{className:"text-sm opacity-90",children:"Recorde"})]})]}),t("div",{className:"mb-8",children:[t("div",{className:"flex justify-between text-sm text-gray-600 mb-2",children:[e("span",{className:"font-medium",children:"Progresso do Quiz"}),t("span",{className:"font-bold text-blue-600",children:[Math.round((l+1)/i.length*100),"%"]})]}),e("div",{className:"w-full bg-gray-200 rounded-full h-4 shadow-inner",children:e("div",{className:"bg-gradient-to-r from-blue-500 via-purple-500 to-pink-500 h-4 rounded-full transition-all duration-700 relative overflow-hidden",style:{width:`${(l+1)/i.length*100}%`},children:e("div",{className:"absolute inset-0 bg-white opacity-30 animate-pulse"})})})]}),e("div",{className:`bg-white rounded-xl shadow-2xl overflow-hidden transition-all duration-300 ${k?"animate-bounce border-4 border-red-500":""}`,children:t("div",{className:"p-8",children:[e("div",{className:"flex items-center justify-center mb-6",children:t("div",{className:"bg-gradient-to-r from-blue-500 to-purple-600 text-white px-6 py-2 rounded-full font-bold text-lg",children:["Questão ",l+1]})}),e("div",{className:"mb-8 text-center",children:e("h2",{className:"text-3xl font-bold text-gray-900 mb-4 leading-tight",children:p.question})}),e("div",{className:"space-y-4 mb-8",children:p.options.map((a,r)=>{const d=g.answers[l]===r,s=r===p.correct,n=c;return e("button",{onClick:()=>X(l,r),disabled:c,className:`w-full text-left p-6 rounded-xl border-3 transition-all duration-300 transform hover:scale-105 ${n&&s?"border-green-500 bg-green-100 text-green-900 animate-pulse":n&&d&&!s?"border-red-500 bg-red-100 text-red-900 animate-bounce":d&&!n?"border-blue-500 bg-blue-100 text-blue-900 scale-105":"border-gray-200 bg-gray-50 hover:border-gray-400 hover:bg-gray-100 hover:shadow-lg"}`,children:t("div",{className:"flex items-center",children:[e("div",{className:`w-8 h-8 rounded-full border-3 mr-4 flex items-center justify-center text-lg font-bold transition-all ${n&&s?"border-green-500 bg-green-500 text-white":n&&d&&!s?"border-red-500 bg-red-500 text-white":d&&!n?"border-blue-500 bg-blue-500 text-white":"border-gray-300"}`,children:n&&s?"✓":n&&d&&!s?"✗":d?"●":String.fromCharCode(65+r)}),e("span",{className:"text-xl font-medium flex-1",children:a}),n&&s&&e("div",{className:"text-2xl animate-spin",children:"⭐"}),n&&d&&!s&&e("div",{className:"text-2xl animate-bounce",children:"💥"})]})},r)})}),c&&t("div",{className:`p-6 rounded-xl mb-6 animate-fadeIn border-2 ${x?"bg-green-50 border-green-200":"bg-red-50 border-red-200"}`,children:[t("div",{className:"flex items-center mb-3",children:[e("div",{className:"text-3xl mr-3",children:x?"🎉":"😅"}),e("h3",{className:`text-xl font-bold ${x?"text-green-800":"text-red-800"}`,children:x?"Parabéns! Resposta Correta!":"Ops! Resposta Incorreta"})]}),p.explanation&&e("div",{className:`p-4 rounded-lg ${x?"bg-green-100":"bg-blue-100"}`,children:t("div",{className:"flex items-start",children:[e("span",{className:"text-xl mr-2",children:"💡"}),t("div",{children:[e("span",{className:"font-medium text-gray-900",children:"Explicação:"}),e("p",{className:"text-gray-800 text-sm mt-1",children:p.explanation})]})]})})]}),t("div",{className:"flex justify-between items-center",children:[e("button",{onClick:_,disabled:l===0||c,className:"px-6 py-3 text-gray-600 hover:text-gray-800 disabled:opacity-50 disabled:cursor-not-allowed transition-all font-medium",children:"← Anterior"}),e("div",{className:"flex space-x-2",children:i.map((a,r)=>e("div",{className:`w-4 h-4 rounded-full transition-all duration-300 ${r===l?"bg-blue-500 scale-125 animate-pulse":g.answers.hasOwnProperty(r)?"bg-green-500":"bg-gray-300"}`},r))}),l===i.length-1?e("button",{onClick:I,disabled:!q()||P||c,className:"px-8 py-3 bg-gradient-to-r from-green-500 to-green-600 text-white rounded-xl font-bold hover:from-green-600 hover:to-green-700 disabled:bg-gray-400 disabled:cursor-not-allowed transition-all duration-200 transform hover:scale-105 shadow-lg",children:P?t(z,{children:[e("span",{className:"animate-spin mr-2",children:"⏳"}),"Finalizando..."]}):t(z,{children:[e("span",{className:"mr-2",children:"🏆"}),"Finalizar Quiz"]})}):e("button",{onClick:Z,disabled:!g.answers.hasOwnProperty(l)||c,className:"px-6 py-3 bg-gradient-to-r from-blue-500 to-purple-600 text-white rounded-xl font-bold hover:from-blue-600 hover:to-purple-700 disabled:bg-gray-400 disabled:cursor-not-allowed transition-all duration-200 transform hover:scale-105 shadow-lg",children:"Próxima →"})]})]})})]})}),e("style",{jsx:!0,children:`
                @keyframes fadeIn {
                    from { opacity: 0; transform: translateY(20px); }
                    to { opacity: 1; transform: translateY(0); }
                }
                .animate-fadeIn {
                    animation: fadeIn 0.5s ease-out;
                }
            `})]})}export{de as default};
